(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{324:function(t,s,a){"use strict";a.r(s);var e=a(19),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"web-安全"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-安全"}},[t._v("#")]),t._v(" Web 安全")]),t._v(" "),a("p",[t._v("Web 安全是个很大的概念，本篇文章介绍几种常见的攻击方式。")]),t._v(" "),a("ul",[a("li",[t._v("XSS 攻击")]),t._v(" "),a("li",[t._v("CSRF 攻击")]),t._v(" "),a("li",[t._v("点击劫持")]),t._v(" "),a("li",[t._v("Web Shell 网站提权渗透")]),t._v(" "),a("li",[t._v("网页挂马和流量劫持")])]),t._v(" "),a("h2",{attrs:{id:"xss-攻击"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击"}},[t._v("#")]),t._v(" XSS 攻击")]),t._v(" "),a("p",[t._v("恶意攻击者往 Web 页面里插入恶意 script 代码，当用户浏览该页时，嵌入其中 Web 里面的 script 代码会被执行，从而达到恶意攻击用户的目的。")]),t._v(" "),a("ul",[a("li",[t._v("非持久型：一般通过修改 URL 参数的方式加入攻击代码，诱导用户访问链接从而进行攻击。")]),t._v(" "),a("li",[t._v("持久型：也叫存储型 XSS，主动提交恶意数据到服务器，当其他用户请求后，服务器从数据库中查询数据并发给用户受到攻击。")])]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 非持久型 http://www.domain.com?name=<script>alert(1)<\/script> --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{name}}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 持久型--\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("xx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onerror")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("console.log(document.cookie);"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"csrf-攻击"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csrf-攻击"}},[t._v("#")]),t._v(" CSRF 攻击")]),t._v(" "),a("p",[t._v("CSRF（Cross-site request forgery），中文名称：跨站请求伪造，也被称为：one click attack/session riding，缩写为：CSRF/XSRF。")]),t._v(" "),a("p",[a("img",{attrs:{src:"osi-web-security-csrf.jpg",alt:"csrf"}})]),t._v(" "),a("h3",{attrs:{id:"csrf-防范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csrf-防范"}},[t._v("#")]),t._v(" CSRF 防范")]),t._v(" "),a("ul",[a("li",[t._v("低安全级别：被黑客抓包，获取请求地址，直接修改参数。")]),t._v(" "),a("li",[t._v("中安全级别：加入验证码，判断 reffer，但这些参数前端都是可以篡改的，这样还会影响用户体验。")]),t._v(" "),a("li",[t._v("高安全级别：验证 token，每次动态更新。")]),t._v(" "),a("li",[t._v("终极防范： 强验证码 + 动态 token 验证。")])]),t._v(" "),a("h3",{attrs:{id:"token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#token"}},[t._v("#")]),t._v(" Token")]),t._v(" "),a("p",[t._v("CSRF 攻击之所以能够成功，是因为黑客可以完全伪造用户的请求，该请求中所有的用户验证信息都是存在于 Cookie 中，因此黑客可以直接利用用户自己的 Cookie 来通过安全验证。")]),t._v(" "),a("p",[t._v("要抵御 CSRF，关键在于在请求中放入黑客所不能伪造的信息，并且该信息不存在于 Cookie 之中。可以在 HTTP 请求中以参数的形式加入一个随机产生的 token，并在服务器端建立一个拦截器来验证这个 token，如果请求中没有 token 或者 token 内容不正确，则认为可能是 CSRF 攻击而拒绝该请求。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("动态 token")]),t._v(" "),a("p",[t._v("每当服务器端验证过 token 之后，便会生成一个新的 token 返给客户端，这样保证客户端手里的 token 只能使用一次，即使 token 被劫持，被劫持到的 token 也已过期，不能使用了。")])]),t._v(" "),a("h2",{attrs:{id:"点击劫持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#点击劫持"}},[t._v("#")]),t._v(" 点击劫持")]),t._v(" "),a("p",[t._v("点击劫持是一种视觉欺骗的攻击手段。攻击者将需要攻击的网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，在页面中透出一个按钮诱导用户点击。")]),t._v(" "),a("p",[t._v("就像一张图片上面铺了一层透明的纸一样，你看到的是黑客的页面，但是其实这个页面只是在底部，而你真正点击的是被黑客透明化的另一个网页。一个简单的点击劫持例子，就是当你点击了一个不明链接之后，自动关注了某一个人的博客或者订阅了视频。"),a("a",{attrs:{href:"https://blog.csdn.net/qq_32523587/article/details/79613768",target:"_blank",rel:"noopener noreferrer"}},[t._v("演示"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"点击劫持防御"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#点击劫持防御"}},[t._v("#")]),t._v(" 点击劫持防御")]),t._v(" "),a("p",[t._v("X-FRAME-OPTIONS 是一个 HTTP 响应头，在现代浏览器有一个很好的支持。这个 HTTP 响应头 就是为了防御用 iframe 嵌套的点击劫持攻击。")]),t._v(" "),a("p",[t._v("该响应头有三个值可选，分别是")]),t._v(" "),a("ul",[a("li",[t._v("DENY，表示页面不允许通过 iframe 的方式展示。")]),t._v(" "),a("li",[t._v("SAMEORIGIN，表示页面可以在相同域名下通过 iframe 的方式展示。")]),t._v(" "),a("li",[t._v("ALLOW-FROM，表示页面可以在指定来源的 iframe 中展示。")])]),t._v(" "),a("p",[t._v("我们也可以通过 js 判断页面是否内嵌在 iframe 中，从而进行相应的处理。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过 js 判断是否内嵌在 iframe，如果是，则隐藏页面")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除页面的内容")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" style "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'main-container'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳回原页面")]),t._v("\n  top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h2",{attrs:{id:"web-shell-网站提权渗透"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-shell-网站提权渗透"}},[t._v("#")]),t._v(" Web Shell 网站提权渗透")]),t._v(" "),a("p",[t._v("它是以 asp，php，jsp 或者 cgi 等网页文件形式存在的一种命令执行环境，由于 webshell 其大多数是以动态脚本的形式出现，也有人称之为网站的后门工具。")]),t._v(" "),a("ul",[a("li",[t._v("编写可执行的 web 脚本文件（木马）。")]),t._v(" "),a("li",[t._v("寻找上传漏洞，上传木马文件。")]),t._v(" "),a("li",[t._v("找到上传后路径，并执行。")]),t._v(" "),a("li",[t._v("安装好中国菜刀，管理木马（获取整个网站的目录了）。")])]),t._v(" "),a("p",[t._v("上传木马文件注意事项：")]),t._v(" "),a("p",[a("img",{attrs:{src:"osi-web-security-1.png",alt:"上传文件扩展名"}})]),t._v(" "),a("p",[t._v("也可以利用部分服务器的漏洞进行上传。")]),t._v(" "),a("p",[a("img",{attrs:{src:"osi-web-security-2.png",alt:"上传文件 HTTP 请求伪造"}})]),t._v(" "),a("p",[t._v("如何防范 Web Shell 网站提权渗透？")]),t._v(" "),a("ul",[a("li",[t._v("上传时检测字节码。如果是图片，字节码前面的几个字符是固定的。")]),t._v(" "),a("li",[t._v("修改上传文件名。")]),t._v(" "),a("li",[t._v("修改静态资源的执行权限。")])]),t._v(" "),a("h2",{attrs:{id:"网页挂马和流量劫持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网页挂马和流量劫持"}},[t._v("#")]),t._v(" 网页挂马和流量劫持")]),t._v(" "),a("h3",{attrs:{id:"网页挂马"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网页挂马"}},[t._v("#")]),t._v(" 网页挂马")]),t._v(" "),a("p",[t._v("网页挂马指的是把一个木马程序部署到一个网站上。具体操作可以先用木马生成器生一个"),a("a",{attrs:{href:"https://baike.baidu.com/item/%E7%BD%91%E9%A9%AC",target:"_blank",rel:"noopener noreferrer"}},[t._v("网马"),a("OutboundLink")],1),t._v("，然后再加代码使得木马在打开网页时就运行！")]),t._v(" "),a("h3",{attrs:{id:"流量劫持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#流量劫持"}},[t._v("#")]),t._v(" 流量劫持")]),t._v(" "),a("p",[t._v("流量劫持是什么？简单来说：")]),t._v(" "),a("ul",[a("li",[t._v("如果你想访问 A 网站，但实际上打开的是 B 网站，这叫 DNS 劫持。")]),t._v(" "),a("li",[t._v("如果你访问 A 网站，但实际上打开的是 A 网站 + 注入的广告，这叫数据劫持。")])]),t._v(" "),a("p",[t._v("更多关于流量劫持的文章，可以参考"),a("RouterLink",{attrs:{to:"/blog/osi-hijack.html"}},[t._v("流量劫持")]),t._v("。")],1),t._v(" "),a("h2",{attrs:{id:"相关链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[t._v("#")]),t._v(" 相关链接")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://fex.baidu.com/blog/2014/04/traffic-hijack/",target:"_blank",rel:"noopener noreferrer"}},[t._v("流量劫持"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);