<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>轻松实战函数式编程 | 前端日志</title>
    <meta name="description" content="欢迎访问公众号：前端日志">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/hero.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.7ffd56ab.css" as="style"><link rel="preload" href="/assets/js/app.d9752643.js" as="script"><link rel="preload" href="/assets/js/2.735dd80d.js" as="script"><link rel="preload" href="/assets/js/15.0ba268c1.js" as="script"><link rel="preload" href="/assets/js/3.782c6b4d.js" as="script"><link rel="prefetch" href="/assets/js/10.505689c0.js"><link rel="prefetch" href="/assets/js/100.f8328832.js"><link rel="prefetch" href="/assets/js/101.8ba139f9.js"><link rel="prefetch" href="/assets/js/102.9292ccca.js"><link rel="prefetch" href="/assets/js/103.fc1f8df4.js"><link rel="prefetch" href="/assets/js/104.85eb0a91.js"><link rel="prefetch" href="/assets/js/105.ddcca173.js"><link rel="prefetch" href="/assets/js/106.5d05e24e.js"><link rel="prefetch" href="/assets/js/107.a71de46c.js"><link rel="prefetch" href="/assets/js/108.1c1f1618.js"><link rel="prefetch" href="/assets/js/109.1e7bd7f3.js"><link rel="prefetch" href="/assets/js/11.c9f038f7.js"><link rel="prefetch" href="/assets/js/110.36621615.js"><link rel="prefetch" href="/assets/js/111.62486bd1.js"><link rel="prefetch" href="/assets/js/112.7affee06.js"><link rel="prefetch" href="/assets/js/113.a5e9e760.js"><link rel="prefetch" href="/assets/js/114.0d9440b9.js"><link rel="prefetch" href="/assets/js/115.ffb70b44.js"><link rel="prefetch" href="/assets/js/116.4293a367.js"><link rel="prefetch" href="/assets/js/117.1e5b3a3e.js"><link rel="prefetch" href="/assets/js/118.a4a3d1fe.js"><link rel="prefetch" href="/assets/js/119.96564c23.js"><link rel="prefetch" href="/assets/js/12.afb00e2e.js"><link rel="prefetch" href="/assets/js/120.f6d85f77.js"><link rel="prefetch" href="/assets/js/121.5dc63cd9.js"><link rel="prefetch" href="/assets/js/122.238dea33.js"><link rel="prefetch" href="/assets/js/123.10b87347.js"><link rel="prefetch" href="/assets/js/124.d450370f.js"><link rel="prefetch" href="/assets/js/125.71fbea97.js"><link rel="prefetch" href="/assets/js/126.a6962f41.js"><link rel="prefetch" href="/assets/js/127.7445f43b.js"><link rel="prefetch" href="/assets/js/128.3028bc3d.js"><link rel="prefetch" href="/assets/js/129.907a98fb.js"><link rel="prefetch" href="/assets/js/13.851aa3b0.js"><link rel="prefetch" href="/assets/js/130.a40aa055.js"><link rel="prefetch" href="/assets/js/14.1e565eeb.js"><link rel="prefetch" href="/assets/js/16.858e7f9a.js"><link rel="prefetch" href="/assets/js/17.9583162a.js"><link rel="prefetch" href="/assets/js/18.e615a85b.js"><link rel="prefetch" href="/assets/js/19.f82fd3e7.js"><link rel="prefetch" href="/assets/js/20.01bc29a5.js"><link rel="prefetch" href="/assets/js/21.a6c9f65c.js"><link rel="prefetch" href="/assets/js/22.96b40d55.js"><link rel="prefetch" href="/assets/js/23.cb5eadb2.js"><link rel="prefetch" href="/assets/js/24.c3da8d07.js"><link rel="prefetch" href="/assets/js/25.58de6fc7.js"><link rel="prefetch" href="/assets/js/26.3d7b3b4c.js"><link rel="prefetch" href="/assets/js/27.4b5827e4.js"><link rel="prefetch" href="/assets/js/28.10cb7709.js"><link rel="prefetch" href="/assets/js/29.203f511c.js"><link rel="prefetch" href="/assets/js/30.9a0d9bda.js"><link rel="prefetch" href="/assets/js/31.2a927868.js"><link rel="prefetch" href="/assets/js/32.b4bdacc8.js"><link rel="prefetch" href="/assets/js/33.a44dd8e8.js"><link rel="prefetch" href="/assets/js/34.c402c77c.js"><link rel="prefetch" href="/assets/js/35.843ae30a.js"><link rel="prefetch" href="/assets/js/36.669e6098.js"><link rel="prefetch" href="/assets/js/37.868a704e.js"><link rel="prefetch" href="/assets/js/38.0157c8c8.js"><link rel="prefetch" href="/assets/js/39.bfbff644.js"><link rel="prefetch" href="/assets/js/4.e842843a.js"><link rel="prefetch" href="/assets/js/40.c56c2315.js"><link rel="prefetch" href="/assets/js/41.ff80c0b6.js"><link rel="prefetch" href="/assets/js/42.571d1c78.js"><link rel="prefetch" href="/assets/js/43.612ac1d0.js"><link rel="prefetch" href="/assets/js/44.322048aa.js"><link rel="prefetch" href="/assets/js/45.443fc365.js"><link rel="prefetch" href="/assets/js/46.27dd470e.js"><link rel="prefetch" href="/assets/js/47.691954c8.js"><link rel="prefetch" href="/assets/js/48.c1e05fc6.js"><link rel="prefetch" href="/assets/js/49.1811cc4d.js"><link rel="prefetch" href="/assets/js/5.faf24bb6.js"><link rel="prefetch" href="/assets/js/50.5750d197.js"><link rel="prefetch" href="/assets/js/51.9fd6a006.js"><link rel="prefetch" href="/assets/js/52.38e7a87f.js"><link rel="prefetch" href="/assets/js/53.5ce56c7d.js"><link rel="prefetch" href="/assets/js/54.02189949.js"><link rel="prefetch" href="/assets/js/55.d1537ecf.js"><link rel="prefetch" href="/assets/js/56.efc80345.js"><link rel="prefetch" href="/assets/js/57.d94c4117.js"><link rel="prefetch" href="/assets/js/58.aba3dfbd.js"><link rel="prefetch" href="/assets/js/59.b47fc32d.js"><link rel="prefetch" href="/assets/js/6.a78c385c.js"><link rel="prefetch" href="/assets/js/60.3c26b030.js"><link rel="prefetch" href="/assets/js/61.3c8027ad.js"><link rel="prefetch" href="/assets/js/62.a9d2bdb0.js"><link rel="prefetch" href="/assets/js/63.ecf0fc7d.js"><link rel="prefetch" href="/assets/js/64.6e8daf96.js"><link rel="prefetch" href="/assets/js/65.5c27ee30.js"><link rel="prefetch" href="/assets/js/66.bcd5f264.js"><link rel="prefetch" href="/assets/js/67.60b3d82d.js"><link rel="prefetch" href="/assets/js/68.5a62d05c.js"><link rel="prefetch" href="/assets/js/69.13f43404.js"><link rel="prefetch" href="/assets/js/7.428acef7.js"><link rel="prefetch" href="/assets/js/70.421fad70.js"><link rel="prefetch" href="/assets/js/71.c2248dea.js"><link rel="prefetch" href="/assets/js/72.5cb30392.js"><link rel="prefetch" href="/assets/js/73.f16f7f3e.js"><link rel="prefetch" href="/assets/js/74.08eae76a.js"><link rel="prefetch" href="/assets/js/75.cd9072fb.js"><link rel="prefetch" href="/assets/js/76.3c9d5077.js"><link rel="prefetch" href="/assets/js/77.d00c2074.js"><link rel="prefetch" href="/assets/js/78.7eb42bbe.js"><link rel="prefetch" href="/assets/js/79.f80c75c9.js"><link rel="prefetch" href="/assets/js/8.62497525.js"><link rel="prefetch" href="/assets/js/80.7c2ea84b.js"><link rel="prefetch" href="/assets/js/81.43a8183d.js"><link rel="prefetch" href="/assets/js/82.db1058ab.js"><link rel="prefetch" href="/assets/js/83.5cec7a8b.js"><link rel="prefetch" href="/assets/js/84.aeac2f5f.js"><link rel="prefetch" href="/assets/js/85.7251a526.js"><link rel="prefetch" href="/assets/js/86.1345ea18.js"><link rel="prefetch" href="/assets/js/87.895ba9ec.js"><link rel="prefetch" href="/assets/js/88.1ac6b992.js"><link rel="prefetch" href="/assets/js/89.181b73a6.js"><link rel="prefetch" href="/assets/js/9.f32f43c5.js"><link rel="prefetch" href="/assets/js/90.c98fb86c.js"><link rel="prefetch" href="/assets/js/91.e2ab3c50.js"><link rel="prefetch" href="/assets/js/92.28707b30.js"><link rel="prefetch" href="/assets/js/93.10d4d970.js"><link rel="prefetch" href="/assets/js/94.93ba4984.js"><link rel="prefetch" href="/assets/js/95.a6c9c378.js"><link rel="prefetch" href="/assets/js/96.57c516f7.js"><link rel="prefetch" href="/assets/js/97.3e1817d0.js"><link rel="prefetch" href="/assets/js/98.8c145e3f.js"><link rel="prefetch" href="/assets/js/99.7e7eb86c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7ffd56ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  原创
</a></div><div class="nav-item"><a href="/translate/" class="nav-link">
  翻译
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  阅读
</a></div> <a href="https://github.com/lmjben/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  原创
</a></div><div class="nav-item"><a href="/translate/" class="nav-link">
  翻译
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  阅读
</a></div> <a href="https://github.com/lmjben/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>DevOps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/devops-microfrontend.html" class="sidebar-link">微前端自检清单</a></li><li><a href="/blog/devops-kubernetes.html" class="sidebar-link">Kubernetes 使用总结</a></li><li><a href="/blog/devops-docker.html" class="sidebar-link">Docker 使用总结</a></li><li><a href="/blog/devops-git.html" class="sidebar-link">Git 常用使用方式</a></li><li><a href="/blog/devops-dependencies.html" class="sidebar-link">Package.json 依赖管理</a></li><li><a href="/blog/devops-image.html" class="sidebar-link">合理选择图片格式</a></li><li><a href="/blog/devops-performance.html" class="sidebar-link">前端性能优化</a></li><li><a href="/blog/devops-commitlint.html" class="sidebar-link">Commitlint 使用总结</a></li><li><a href="/blog/devops-cli-diy.html" class="sidebar-link">实现一个自己的 CLI</a></li><li><a href="/blog/devops-test.html" class="sidebar-link">前端测试</a></li><li><a href="/blog/devops-webpack-entry.html" class="sidebar-link">Webpack 系列（三）整体流程分析</a></li><li><a href="/blog/devops-webpack-flow.html" class="sidebar-link">Webpack 系列（二）手写模块打包代码</a></li><li><a href="/blog/devops-webpack.html" class="sidebar-link">Webpack 系列（一）使用总结</a></li><li><a href="/blog/devops-cdfang-spider.html" class="sidebar-link">实战：手搭一个 React，Typescript，Koa，GraphQL 环境</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/library-node.html" class="sidebar-link">Node.js 使用总结</a></li><li><a href="/blog/library-react.html" class="sidebar-link">React 使用总结</a></li><li><a href="/blog/libary-react-core.html" class="sidebar-link">React 核心知识</a></li><li><a href="/blog/library-react-code-1.html" class="sidebar-link">React 源码解析（一）JSX 转换</a></li><li><a href="/blog/library-react-code-2.html" class="sidebar-link">React 源码解析（二）FiberRoot 构建</a></li><li><a href="/blog/library-react-code-3.html" class="sidebar-link">React 源码解析（三）Fiber 的调度过程</a></li><li><a href="/blog/library-react-code-4.html" class="sidebar-link">React 源码解析（四）深入理解 fiber 更新过程</a></li><li><a href="/blog/library-react-ssr.html" class="sidebar-link">React 服务器端渲染</a></li><li><a href="/blog/library-react-hooks.html" class="sidebar-link">使用 React Hooks 节省 90% 的代码</a></li><li><a href="/blog/library-vue.html" class="sidebar-link">Vue 使用总结</a></li><li><a href="/blog/library-vue-flow.html" class="sidebar-link">图解 Vue 响应式原理</a></li><li><a href="/blog/library-vue-nexttick.html" class="sidebar-link">图解 Vue 异步更新</a></li><li><a href="/blog/library-miniProgram.html" class="sidebar-link">小程序使用总结</a></li><li><a href="/blog/library-redux.html" class="sidebar-link">Redux 使用总结</a></li><li><a href="/blog/library-react-redux-code.html" class="sidebar-link">React Hooks 替代 React-Redux</a></li><li><a href="/blog/library-rxjs.html" class="sidebar-link">RxJS 基础知识总结</a></li><li><a href="/blog/library-koa.html" class="sidebar-link">Koa 源码阅读</a></li><li><a href="/blog/library-koa-diy.html" class="sidebar-link">深入 Koa 原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/css-icon.html" class="sidebar-link">网站图标开发指南</a></li><li><a href="/blog/css.html" class="sidebar-link">CSS 使用总结</a></li><li><a href="/blog/css-modules.html" class="sidebar-link">CSS 模块化</a></li><li><a href="/blog/css-next.html" class="sidebar-link">CSS NEXT 语法</a></li><li><a href="/blog/css-ifc.html" class="sidebar-link">CSS IFC 总结</a></li><li><a href="/blog/css-flex.html" class="sidebar-link">CSS Flex 布局总结</a></li><li><a href="/blog/css-useful.html" class="sidebar-link">CSS 有趣的特性</a></li><li><a href="/blog/css-devicePixelRatio.html" class="sidebar-link">CSS 设备像素比</a></li><li><a href="/blog/css-houdini-star.html" class="sidebar-link">CSS Houdini 画一片星空</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>网络协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/osi-flow.html" class="sidebar-link">一文串联 HTTP、TCP、IP、以太网</a></li><li><a href="/blog/osi-http.html" class="sidebar-link">HTTP 协议总结</a></li><li><a href="/blog/osi-https.html" class="sidebar-link">HTTPS 协议总结</a></li><li><a href="/blog/osi-tcp.html" class="sidebar-link">TCP 协议总结</a></li><li><a href="/blog/osi-web-security.html" class="sidebar-link">一文读懂 Web 安全</a></li><li><a href="/blog/osi-web-login.html" class="sidebar-link">前端登录，这一篇就够了</a></li><li><a href="/blog/osi-hijack.html" class="sidebar-link">流量劫持</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>运维相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/operation-docker-micro-service.html" class="sidebar-link">Docker 部署简单的 Web 服务</a></li><li><a href="/blog/operation-linux.html" class="sidebar-link">Linux 快捷键</a></li><li><a href="/blog/operation-linux-login.html" class="sidebar-link">Linux 免密登录配置</a></li><li><a href="/blog/operation-linux-file.html" class="sidebar-link">Linux 替换文件内容命令</a></li><li><a href="/blog/operation-nginx-match.html" class="sidebar-link">Nginx Location 匹配规则</a></li><li><a href="/blog/operation-nginx-load-balancing.html" class="sidebar-link">Nginx 负载均衡配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JS 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js-prototype.html" class="sidebar-link">快速读懂 JS 原型链</a></li><li><a href="/blog/js-principle.html" class="sidebar-link">JS 编译器，解释引擎</a></li><li><a href="/blog/js-promise.html" class="sidebar-link">JS 理解 Promise</a></li><li><a href="/blog/js-this.html" class="sidebar-link">JS 理解 This</a></li><li><a href="/blog/js-canvas.html" class="sidebar-link">两行代码实现图片碎片化加载</a></li><li><a href="/blog/js-operator-priority.html" class="sidebar-link">JS 运算符优先级</a></li><li><a href="/blog/js-jsBridge.html" class="sidebar-link">JS Bridge 总结</a></li><li><a href="/blog/js-module.html" class="sidebar-link">JS 模块化</a></li><li><a href="/blog/js-inherit.html" class="sidebar-link">JS 实现继承</a></li><li><a href="/blog/js-event.html" class="sidebar-link">JS 事件</a></li><li><a href="/blog/js-form.html" class="sidebar-link">JS 表单基础知识</a></li><li><a href="/blog/js-html5-program.html" class="sidebar-link">JS PostMessage &amp; 拖放 API</a></li><li><a href="/blog/js-recursion.html" class="sidebar-link">JS 函数尾递归优化</a></li><li><a href="/blog/js-object-ergodic.html" class="sidebar-link">JS 对象属性的遍历</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>编程基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/base-function-monad.html" class="sidebar-link">学习函数式编程 Monad</a></li><li><a href="/blog/base-function.html" class="active sidebar-link">轻松实战函数式编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/base-function.html#编程范式" class="sidebar-link">编程范式</a></li><li class="sidebar-sub-header"><a href="/blog/base-function.html#函数式编程" class="sidebar-link">函数式编程</a></li><li class="sidebar-sub-header"><a href="/blog/base-function.html#函数式编程常见案例" class="sidebar-link">函数式编程常见案例</a></li><li class="sidebar-sub-header"><a href="/blog/base-function.html#思考与总结" class="sidebar-link">思考与总结</a></li></ul></li><li><a href="/blog/base-typescript.html" class="sidebar-link">Typescript 使用总结</a></li><li><a href="/blog/base-graphql.html" class="sidebar-link">GraphQL 使用总结</a></li><li><a href="/blog/base-ioc.html" class="sidebar-link">你需要知道的依赖注入</a></li><li><a href="/blog/base-functional.html" class="sidebar-link">函数式编程</a></li><li><a href="/blog/base-webcomponents.html" class="sidebar-link">Web Component 基础</a></li><li><a href="/blog/base-structure.html" class="sidebar-link">数据结构与算法</a></li><li><a href="/blog/base-structure-base-select.html" class="sidebar-link">查找算法</a></li><li><a href="/blog/base-structure-base-sort.html" class="sidebar-link">基本排序算法</a></li><li><a href="/blog/base-structure-high-algorithm.html" class="sidebar-link">高级算法</a></li><li><a href="/blog/base-structure-senior-sort.html" class="sidebar-link">高级排序算法</a></li><li><a href="/blog/base-design-pattern.html" class="sidebar-link">设计模式</a></li><li><a href="/blog/base-computer.html" class="sidebar-link">计算机组成原理</a></li><li><a href="/blog/base-technology.html" class="sidebar-link">专业术语</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>总结思考</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/2020-6.html" class="sidebar-link">我的 2020 总结（上）</a></li><li><a href="/blog/2019-12.html" class="sidebar-link">我的 2019 总结（下）</a></li><li><a href="/blog/2019-6.html" class="sidebar-link">我的 2019 总结（上）</a></li><li><a href="/blog/2018.html" class="sidebar-link">我的 2018 总结</a></li><li><a href="/blog/frontend.html" class="sidebar-link">我的前端知识清单</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其它</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/other-pit.html" class="sidebar-link">记录遇到的坑</a></li><li><a href="/blog/other-tools.html" class="sidebar-link">常用工具整理</a></li><li><a href="/blog/other-vscode.html" class="sidebar-link">VSCode 常用快捷键</a></li><li><a href="/blog/other-npm.html" class="sidebar-link">实用的 npm 包</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="轻松实战函数式编程"><a href="#轻松实战函数式编程" class="header-anchor">#</a> 轻松实战函数式编程</h1> <p>最近和一些同学讨论了函数式编程，很多同学总觉得听起来很高大上，但用起来却无从下手。于是我抽时间捋了捋，将平时工作中用到的函数式编程案例和思想整理了出来，相信阅读本文后，大家都能快速上手函数式编程。</p> <p>函数式编程目前使用范围非常广，常用的框架，语言几乎都能看到它的身影。</p> <ul><li>前端框架：react、vue 的 hooks 用法。</li> <li>打包工具：webpack 的 webpack-chain 用法。</li> <li>工具库：underscore、lodash、ramda。</li> <li>部署方式：serverless。</li> <li>后端：java、c# 中的 lamda 表达式。</li></ul> <p>本文将通过以下 3 个部分来深入函数式编程。</p> <ul><li>编程范式</li> <li>函数式编程</li> <li>函数式编程常见案例</li></ul> <h2 id="编程范式"><a href="#编程范式" class="header-anchor">#</a> 编程范式</h2> <p><strong>编程范式</strong> 指的是一种编程风格，它描述了程序员对程序执行的看法。在编程的世界中，同一个问题，可以站在多个角度去分析解决，这些不同的解决方案就对应了不同的编程风格。</p> <p>常见的编程范式有：</p> <ul><li>命令式编程
<ul><li>面向过程编程
<ul><li>C</li></ul></li> <li>面向对象编程
<ul><li>C++、C#、Java</li></ul></li></ul></li> <li>声明式编程
<ul><li>函数式编程
<ul><li>Haskell</li></ul></li></ul></li></ul> <h3 id="命令式编程"><a href="#命令式编程" class="header-anchor">#</a> 命令式编程</h3> <p><strong>命令式编程</strong> 是使用最广的一种编程风格，它是站在计算机的角度去思考问题，主要思想是 <strong>关注计算机执行的步骤，即一步一步告诉计算机先做什么再做什么</strong>。</p> <p>由于存在很多需要控制的步骤，所以命令式编程普遍存在以下特点：</p> <ul><li>控制语句
<ul><li>循环语句：while、for</li> <li>条件分支语句：if else、switch</li> <li>无条件分支语句：return、break、continue</li></ul></li> <li>变量
<ul><li>赋值语句</li></ul></li></ul> <p>根据这些特点，我们来分析一个命令式编程案例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 需求：筛选出数组中为奇数的子集合</span>

<span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 步骤1：定义执行结果变量</span>
<span class="token keyword">let</span> reult <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 步骤2：控制程序循环调用</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 步骤3：判断筛选条件</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 步骤4：加入执行结果</span>
    reult<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 步骤5：得到最终的结果 result</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>以上代码通过 5 个步骤，实现了数组的筛选，这并没有什么问题，但细心的同学可能会感到疑惑：这样写的代码量太长了，而且并不语义化，只有阅读完每一行的代码，才知道具体执行的是什么逻辑。</p> <p>没错，这就是命令式编程的典型特点，除此之外，还有以下几点：</p> <ul><li>命令式编程的每一个步骤都可以由程序员定义，这样可以更精细化、更严谨地控制代码，从而提高程序的性能。</li> <li>命令式编程的每一个步骤都可以记录中间结果，方便调试代码。</li> <li>命令式编程需要大量的流程控制语句，在处理多线程状态同步问题时，容易造成逻辑混乱，通常需要加锁来解决。</li></ul> <h3 id="声明式编程"><a href="#声明式编程" class="header-anchor">#</a> 声明式编程</h3> <p><strong>声明式编程</strong> 同样是一种编程风格，它通过定义具体的规则，以便系统底层可以自动实现具体功能。主要思想是 <strong>告诉计算机应该做什么，但不指定具体要怎么做</strong>。</p> <p>由于需要定义规则来表达含义，所以声明式编程普遍存在以下特点：</p> <ul><li>代码更加语义化，便于理解。</li> <li>代码量更少。</li> <li>不需要流程控制代码，如：for、while、if 等。</li></ul> <p>接下来，我们将上文中的数组筛选，用声明式的方式重构一下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 筛选出数组中为奇数的子集合</span>
<span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> reult <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以看到，声明式编程没有冗余的操作步骤，代码量非常少，并且非常语义化，当我们读到 filter 的时候，自然而然就知道是在做筛选。</p> <p>我们再看一个案例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 使用 sql 语句，查询 id 为 25 的学生</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> students <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">25</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在上述代码中，我们只是告诉计算机，我想查找 id 为 25 的同学，计算机就能给我们返回对应的数据了，至于是怎么查找出来的，我们并不需要关心，只要结果是正确的即可。</p> <p>除了上述例子之外，还有很多声明式编程的案例：</p> <ul><li>html 用来声明了网页的内容。</li> <li>css 用来声明网页中元素的外观。</li> <li>正则表达式，声明匹配的规则。</li></ul> <p>有了以上几个案例，我们来总结一下声明式编程的优缺点：</p> <ul><li>声明式编程不需要编写复杂的操作步骤，可以大大减少开发者的工作量。</li> <li>声明式编程的具体操作都是底层统一管理，可以降低重复工作。</li> <li>声明式编程底层实现的逻辑并不可控，不适合做更精细化的优化。</li></ul> <h2 id="函数式编程"><a href="#函数式编程" class="header-anchor">#</a> 函数式编程</h2> <p><strong>函数式编程</strong> 属于声明式编程中的一种，它的主要思想是 <strong>将计算机运算看作为函数的计算</strong>，也就是把程序问题抽象成数学问题去解决。</p> <p>函数式编程中，我们可以充分利用数学公式来解决问题。也就是说，任何问题都可以通过函数（加减乘除）和数学定律（交换律、结合律等），一步一步计算，最终得到答案。</p> <p>函数式编程中，所有的变量都是唯一的值，就像是数学中的代数 x、y，它们要么还未解出来，要么已经被解出为固定值，所以对于：<code>x=x+1</code> 这样的自增是不合法的，因为修改了代数值，不符合数学逻辑。</p> <p>除此之外，严格意义上的函数式编程也不包括循环、条件判断等控制语句，如果需要条件判断，可以使用三元运算符代替。</p> <p>文章开头我们提到了 webpack-chain，我们一起来看一下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 使用 webpack-chain 来编写 webpack 配置。</span>
<span class="token keyword">const</span> Config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-chain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
config<span class="token punctuation">.</span>
    <span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'src/index.js'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>output
         <span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span>
         <span class="token function">filename</span><span class="token punctuation">(</span><span class="token string">'my-first-webpack.bundle.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
config<span class="token punctuation">.</span>module
    <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">'compile'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token regex">/\.js$/</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'babel'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">'babel-loader'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>可以看到，webpack-chain 可以通过链式的函数 api 来创建和修改 webpack 配置，从而更方便地创建和修改 webpack 配置。试想一下，如果一份 webpack 配置需要用于多个项目，但每个项目又有一些细微的不同配置，这个应该怎么处理呢？</p> <p>如果使用 webpack-chain 去修改配置，一个函数 api 就搞定了，而使用命令式的编程，则需要去逐步遍历整个 webpack 配置文件，找出需要修改的点，才能进行修改，这无疑就大大减少了我们的工作量。</p> <h3 id="函数式编程的特点"><a href="#函数式编程的特点" class="header-anchor">#</a> 函数式编程的特点</h3> <p>根据维基百科权威定义，函数式编程有以下几个特点：</p> <ul><li>函数是一等公民
<ul><li>函数可以和变量一样，可以赋值给其他变量，也可以作为参数，传入一个函数，或者作为别的函数返回值。</li></ul></li> <li>只用表达式，不用语句：
<ul><li>表达式是一段单纯的运算过程，总是有返回值。</li> <li>语句是执行某种操作，没有返回值。</li> <li>也就是说，函数式编程中的每一步都是单纯的运算，而且都有返回值。</li></ul></li> <li>无副作用
<ul><li>不会产生除运算以外的其他结果。</li> <li>同一个输入永远得到同一个数据。</li></ul></li> <li>不可变性
<ul><li>不修改变量，返回一个新的值。</li></ul></li> <li>引用透明
<ul><li>函数的运行不依赖于外部变量，只依赖于输入的参数。</li></ul></li></ul> <p>以上的特点都是函数式编程的核心，基于这些特点，又衍生出了许多应用场景：</p> <ul><li>纯函数：同样的输入得到同样的输出，无副作用。</li> <li>函数组合：将多个依次调用的函数，组合成一个大函数，简化操作步骤。</li> <li>高阶函数：可以加工函数的函数，接收一个或多个函数作为输入、输出一个函数。</li> <li>闭包：函数作用域嵌套，实现的不同作用域变量共享。</li> <li>柯里化：将一个多参数函数转化为多个嵌套的单参数函数。</li> <li>偏函数：缓存一部分参数，然后让另一些参数在使用时传入。</li> <li>惰性求值：预先定义多个操作，但不立即求值，在需要使用值时才去求值，可以避免不必要的求值，提升性能。</li> <li>递归：控制函数循环调用的一种方式。</li> <li>尾递归：避免多层级函数嵌套导致的内存溢出的优化。</li> <li>链式调用：让代码更加优雅。</li></ul> <p>这些应用场景都大量存在于我们的日常工作中，接下来我们通过几个案例来实战一下。</p> <h2 id="函数式编程常见案例"><a href="#函数式编程常见案例" class="header-anchor">#</a> 函数式编程常见案例</h2> <p>基于函数式编程的应用场景，我们来实现几个具体的案例。</p> <ul><li>函数组合</li> <li>柯里化</li> <li>偏函数</li> <li>高阶函数</li> <li>尾递归</li> <li>链式调用</li></ul> <p>1、函数组合，组合多个函数步骤。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> g</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">g</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toLocaleUpperCase</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">toLocaleUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toSigh</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str <span class="token operator">+</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 将多个函数按照先后执行顺序组合成一个函数，简化多个调用步骤。</span>
<span class="token keyword">const</span> composedFn <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>toSigh<span class="token punctuation">,</span> toLocaleUpperCase<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;函数组合：&quot;</span><span class="token punctuation">,</span> <span class="token function">composedFn</span><span class="token punctuation">(</span><span class="token string">&quot;msx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 函数组合：MSX!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>2、柯里化，将一个多参数函数转化为多个嵌套的单参数函数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 柯里化</span>
<span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">targetfn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> numOfArgs <span class="token operator">=</span> targetfn<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rest<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> numOfArgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">targetfn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 加法函数</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c <span class="token operator">+</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 将一个多参数函数转化为多个嵌套的单参数函数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;柯里化：&quot;</span><span class="token punctuation">,</span> <span class="token function">curry</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 柯里化：10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>3、偏函数，缓存一部分参数，然后让另一些参数在使用时传入。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 偏函数</span>
<span class="token keyword">function</span> <span class="token function">isTypeX</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[object </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 缓存一部分参数，然后让另一些参数在使用时传入。</span>
<span class="token keyword">const</span> isObject <span class="token operator">=</span> <span class="token function">isTypeX</span><span class="token punctuation">(</span><span class="token string">&quot;Object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isNumber <span class="token operator">=</span> <span class="token function">isTypeX</span><span class="token punctuation">(</span><span class="token string">&quot;Number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;偏函数测试：&quot;</span><span class="token punctuation">,</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;偏函数测试：&quot;</span><span class="token punctuation">,</span> <span class="token function">isNumber</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>4、惰性求值，预先定义多个操作，但不立即求值，在需要使用值时才去求值，可以避免不必要的求值，提升性能。</p> <div class="language-c# line-numbers-mode"><pre class="language-text"><code>// 这里使用 C# 中的 LINQ 来演示
// 假设数据库中有这样一段数据 db.Gems [4,15,20,7,3,13,2,20];

var q =
    db.Gems
    .Select(c =&gt; c &lt; 10)
  	.Take(3)
  	// 只要不调用 ToList 就不会求值
  	// 在具体求值的时候，会将预先定义的方法进行优化整合，以产生一个最优的解决方案，才会去求值。
    .ToList();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>上述代码中，传统的求值会遍历 2 次，第一次遍历整个数组（8 项），筛选出小于 10 的项，输出 <code>[4,7,3,2]</code>，第二次遍历这个数组（4 项），输出 <code>[4,7,3]</code>。</p> <p>如果使用惰性求值，则会将预先定义的所有操作放在一起进行判断，所以只需要遍历 1 次就可以了。在遍历的同时判断 <code>是否小于 10</code> 和 <code>小于 10 的个数是否为 3</code>，当遍历到第 5 项时，就能输出 <code>[4,7,3]</code>。</p> <p>相比传统求值遍历的 8+4=12 项，使用惰性求值则只需遍历 5 项，程序的运行效率也就自然而然地得到了提升。</p> <p>5、高阶函数，可以加工函数的函数（接收一个或多个函数作为输入、输出一个函数）。</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// React 组件中，将一个组件，封装为带默认背景色的新组件。</span>
<span class="token comment">// styled-components 就是这个原理</span>
<span class="token keyword">function</span> <span class="token function">withBackgroundRedColor</span> <span class="token punctuation">(</span><span class="token parameter">wrapedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>backgroundColor<span class="token operator">:</span> 'red<span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
                 </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wrapedComponent</span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
             </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>6、递归和尾递归。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 普通递归，控制函数循环调用的一种方式。</span>
<span class="token keyword">function</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;没有使用尾递归，导致栈溢出&quot;</span><span class="token punctuation">,</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 尾递归，避免多层级函数嵌套导致的内存溢出的优化。</span>
<span class="token keyword">function</span> <span class="token function">fibonacci2</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> result<span class="token punctuation">,</span> preValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">fibonacci2</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> preValue<span class="token punctuation">,</span> result <span class="token operator">+</span> preValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// result = 0, preValue = 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;使用了尾递归，不会栈溢出&quot;</span><span class="token punctuation">,</span> <span class="token function">fibonacci2</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>6、链式调用</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// lodash 中，一个方法调用完成之后，可以继续链式调用其他的方法。</span>
<span class="token keyword">var</span> users <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> user<span class="token operator">:</span> <span class="token string">&quot;barney&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">36</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> user<span class="token operator">:</span> <span class="token string">&quot;fred&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">40</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> user<span class="token operator">:</span> <span class="token string">&quot;pebbles&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> youngest <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">chain</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">sortBy</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> o<span class="token punctuation">.</span>user <span class="token operator">+</span> <span class="token string">&quot; is &quot;</span> <span class="token operator">+</span> o<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">head</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; 'pebbles is 1'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="思考与总结"><a href="#思考与总结" class="header-anchor">#</a> 思考与总结</h2> <p>本文从编程范式开始，分析了函数式编程的定位，进一步引申出函数式编程的概念，然后基于一些工作中的案例，实战了函数式编程的应用场景，希望大家都能轻松地认识函数式编程。</p> <p>最后，如果你对此有任何想法，欢迎留言评论！</p> <p><img src="https://cdn.yinhengli.com/qianduanrizhi_guanzhu.png" alt=""></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/lmjben/blog/edit/master/docs/blog/base-function.md" target="_blank" rel="noopener noreferrer">本文源码地址</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">9/23/2020, 3:31:40 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/base-function-monad.html" class="prev">
        学习函数式编程 Monad
      </a></span> <span class="next"><a href="/blog/base-typescript.html">
        Typescript 使用总结
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.d9752643.js" defer></script><script src="/assets/js/2.735dd80d.js" defer></script><script src="/assets/js/15.0ba268c1.js" defer></script><script src="/assets/js/3.782c6b4d.js" defer></script>
  </body>
</html>
