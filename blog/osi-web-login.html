<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端登录，这一篇就够了 | 前端日志</title>
    <meta name="description" content="欢迎访问公众号：前端日志">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/hero.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.7ffd56ab.css" as="style"><link rel="preload" href="/assets/js/app.d9752643.js" as="script"><link rel="preload" href="/assets/js/2.735dd80d.js" as="script"><link rel="preload" href="/assets/js/97.3e1817d0.js" as="script"><link rel="preload" href="/assets/js/3.782c6b4d.js" as="script"><link rel="prefetch" href="/assets/js/10.505689c0.js"><link rel="prefetch" href="/assets/js/100.f8328832.js"><link rel="prefetch" href="/assets/js/101.8ba139f9.js"><link rel="prefetch" href="/assets/js/102.9292ccca.js"><link rel="prefetch" href="/assets/js/103.fc1f8df4.js"><link rel="prefetch" href="/assets/js/104.85eb0a91.js"><link rel="prefetch" href="/assets/js/105.ddcca173.js"><link rel="prefetch" href="/assets/js/106.5d05e24e.js"><link rel="prefetch" href="/assets/js/107.a71de46c.js"><link rel="prefetch" href="/assets/js/108.1c1f1618.js"><link rel="prefetch" href="/assets/js/109.1e7bd7f3.js"><link rel="prefetch" href="/assets/js/11.c9f038f7.js"><link rel="prefetch" href="/assets/js/110.36621615.js"><link rel="prefetch" href="/assets/js/111.62486bd1.js"><link rel="prefetch" href="/assets/js/112.7affee06.js"><link rel="prefetch" href="/assets/js/113.a5e9e760.js"><link rel="prefetch" href="/assets/js/114.0d9440b9.js"><link rel="prefetch" href="/assets/js/115.ffb70b44.js"><link rel="prefetch" href="/assets/js/116.4293a367.js"><link rel="prefetch" href="/assets/js/117.1e5b3a3e.js"><link rel="prefetch" href="/assets/js/118.a4a3d1fe.js"><link rel="prefetch" href="/assets/js/119.96564c23.js"><link rel="prefetch" href="/assets/js/12.afb00e2e.js"><link rel="prefetch" href="/assets/js/120.f6d85f77.js"><link rel="prefetch" href="/assets/js/121.5dc63cd9.js"><link rel="prefetch" href="/assets/js/122.238dea33.js"><link rel="prefetch" href="/assets/js/123.10b87347.js"><link rel="prefetch" href="/assets/js/124.d450370f.js"><link rel="prefetch" href="/assets/js/125.71fbea97.js"><link rel="prefetch" href="/assets/js/126.a6962f41.js"><link rel="prefetch" href="/assets/js/127.7445f43b.js"><link rel="prefetch" href="/assets/js/128.3028bc3d.js"><link rel="prefetch" href="/assets/js/129.907a98fb.js"><link rel="prefetch" href="/assets/js/13.851aa3b0.js"><link rel="prefetch" href="/assets/js/130.a40aa055.js"><link rel="prefetch" href="/assets/js/14.1e565eeb.js"><link rel="prefetch" href="/assets/js/15.0ba268c1.js"><link rel="prefetch" href="/assets/js/16.858e7f9a.js"><link rel="prefetch" href="/assets/js/17.9583162a.js"><link rel="prefetch" href="/assets/js/18.e615a85b.js"><link rel="prefetch" href="/assets/js/19.f82fd3e7.js"><link rel="prefetch" href="/assets/js/20.01bc29a5.js"><link rel="prefetch" href="/assets/js/21.a6c9f65c.js"><link rel="prefetch" href="/assets/js/22.96b40d55.js"><link rel="prefetch" href="/assets/js/23.cb5eadb2.js"><link rel="prefetch" href="/assets/js/24.c3da8d07.js"><link rel="prefetch" href="/assets/js/25.58de6fc7.js"><link rel="prefetch" href="/assets/js/26.3d7b3b4c.js"><link rel="prefetch" href="/assets/js/27.4b5827e4.js"><link rel="prefetch" href="/assets/js/28.10cb7709.js"><link rel="prefetch" href="/assets/js/29.203f511c.js"><link rel="prefetch" href="/assets/js/30.9a0d9bda.js"><link rel="prefetch" href="/assets/js/31.2a927868.js"><link rel="prefetch" href="/assets/js/32.b4bdacc8.js"><link rel="prefetch" href="/assets/js/33.a44dd8e8.js"><link rel="prefetch" href="/assets/js/34.c402c77c.js"><link rel="prefetch" href="/assets/js/35.843ae30a.js"><link rel="prefetch" href="/assets/js/36.669e6098.js"><link rel="prefetch" href="/assets/js/37.868a704e.js"><link rel="prefetch" href="/assets/js/38.0157c8c8.js"><link rel="prefetch" href="/assets/js/39.bfbff644.js"><link rel="prefetch" href="/assets/js/4.e842843a.js"><link rel="prefetch" href="/assets/js/40.c56c2315.js"><link rel="prefetch" href="/assets/js/41.ff80c0b6.js"><link rel="prefetch" href="/assets/js/42.571d1c78.js"><link rel="prefetch" href="/assets/js/43.612ac1d0.js"><link rel="prefetch" href="/assets/js/44.322048aa.js"><link rel="prefetch" href="/assets/js/45.443fc365.js"><link rel="prefetch" href="/assets/js/46.27dd470e.js"><link rel="prefetch" href="/assets/js/47.691954c8.js"><link rel="prefetch" href="/assets/js/48.c1e05fc6.js"><link rel="prefetch" href="/assets/js/49.1811cc4d.js"><link rel="prefetch" href="/assets/js/5.faf24bb6.js"><link rel="prefetch" href="/assets/js/50.5750d197.js"><link rel="prefetch" href="/assets/js/51.9fd6a006.js"><link rel="prefetch" href="/assets/js/52.38e7a87f.js"><link rel="prefetch" href="/assets/js/53.5ce56c7d.js"><link rel="prefetch" href="/assets/js/54.02189949.js"><link rel="prefetch" href="/assets/js/55.d1537ecf.js"><link rel="prefetch" href="/assets/js/56.efc80345.js"><link rel="prefetch" href="/assets/js/57.d94c4117.js"><link rel="prefetch" href="/assets/js/58.aba3dfbd.js"><link rel="prefetch" href="/assets/js/59.b47fc32d.js"><link rel="prefetch" href="/assets/js/6.a78c385c.js"><link rel="prefetch" href="/assets/js/60.3c26b030.js"><link rel="prefetch" href="/assets/js/61.3c8027ad.js"><link rel="prefetch" href="/assets/js/62.a9d2bdb0.js"><link rel="prefetch" href="/assets/js/63.ecf0fc7d.js"><link rel="prefetch" href="/assets/js/64.6e8daf96.js"><link rel="prefetch" href="/assets/js/65.5c27ee30.js"><link rel="prefetch" href="/assets/js/66.bcd5f264.js"><link rel="prefetch" href="/assets/js/67.60b3d82d.js"><link rel="prefetch" href="/assets/js/68.5a62d05c.js"><link rel="prefetch" href="/assets/js/69.13f43404.js"><link rel="prefetch" href="/assets/js/7.428acef7.js"><link rel="prefetch" href="/assets/js/70.421fad70.js"><link rel="prefetch" href="/assets/js/71.c2248dea.js"><link rel="prefetch" href="/assets/js/72.5cb30392.js"><link rel="prefetch" href="/assets/js/73.f16f7f3e.js"><link rel="prefetch" href="/assets/js/74.08eae76a.js"><link rel="prefetch" href="/assets/js/75.cd9072fb.js"><link rel="prefetch" href="/assets/js/76.3c9d5077.js"><link rel="prefetch" href="/assets/js/77.d00c2074.js"><link rel="prefetch" href="/assets/js/78.7eb42bbe.js"><link rel="prefetch" href="/assets/js/79.f80c75c9.js"><link rel="prefetch" href="/assets/js/8.62497525.js"><link rel="prefetch" href="/assets/js/80.7c2ea84b.js"><link rel="prefetch" href="/assets/js/81.43a8183d.js"><link rel="prefetch" href="/assets/js/82.db1058ab.js"><link rel="prefetch" href="/assets/js/83.5cec7a8b.js"><link rel="prefetch" href="/assets/js/84.aeac2f5f.js"><link rel="prefetch" href="/assets/js/85.7251a526.js"><link rel="prefetch" href="/assets/js/86.1345ea18.js"><link rel="prefetch" href="/assets/js/87.895ba9ec.js"><link rel="prefetch" href="/assets/js/88.1ac6b992.js"><link rel="prefetch" href="/assets/js/89.181b73a6.js"><link rel="prefetch" href="/assets/js/9.f32f43c5.js"><link rel="prefetch" href="/assets/js/90.c98fb86c.js"><link rel="prefetch" href="/assets/js/91.e2ab3c50.js"><link rel="prefetch" href="/assets/js/92.28707b30.js"><link rel="prefetch" href="/assets/js/93.10d4d970.js"><link rel="prefetch" href="/assets/js/94.93ba4984.js"><link rel="prefetch" href="/assets/js/95.a6c9c378.js"><link rel="prefetch" href="/assets/js/96.57c516f7.js"><link rel="prefetch" href="/assets/js/98.8c145e3f.js"><link rel="prefetch" href="/assets/js/99.7e7eb86c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7ffd56ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  原创
</a></div><div class="nav-item"><a href="/translate/" class="nav-link">
  翻译
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  阅读
</a></div> <a href="https://github.com/lmjben/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  原创
</a></div><div class="nav-item"><a href="/translate/" class="nav-link">
  翻译
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  阅读
</a></div> <a href="https://github.com/lmjben/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>DevOps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/devops-microfrontend.html" class="sidebar-link">微前端自检清单</a></li><li><a href="/blog/devops-kubernetes.html" class="sidebar-link">Kubernetes 使用总结</a></li><li><a href="/blog/devops-docker.html" class="sidebar-link">Docker 使用总结</a></li><li><a href="/blog/devops-git.html" class="sidebar-link">Git 常用使用方式</a></li><li><a href="/blog/devops-dependencies.html" class="sidebar-link">Package.json 依赖管理</a></li><li><a href="/blog/devops-image.html" class="sidebar-link">合理选择图片格式</a></li><li><a href="/blog/devops-performance.html" class="sidebar-link">前端性能优化</a></li><li><a href="/blog/devops-commitlint.html" class="sidebar-link">Commitlint 使用总结</a></li><li><a href="/blog/devops-cli-diy.html" class="sidebar-link">实现一个自己的 CLI</a></li><li><a href="/blog/devops-test.html" class="sidebar-link">前端测试</a></li><li><a href="/blog/devops-webpack-entry.html" class="sidebar-link">Webpack 系列（三）整体流程分析</a></li><li><a href="/blog/devops-webpack-flow.html" class="sidebar-link">Webpack 系列（二）手写模块打包代码</a></li><li><a href="/blog/devops-webpack.html" class="sidebar-link">Webpack 系列（一）使用总结</a></li><li><a href="/blog/devops-cdfang-spider.html" class="sidebar-link">实战：手搭一个 React，Typescript，Koa，GraphQL 环境</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/library-node.html" class="sidebar-link">Node.js 使用总结</a></li><li><a href="/blog/library-react.html" class="sidebar-link">React 使用总结</a></li><li><a href="/blog/libary-react-core.html" class="sidebar-link">React 核心知识</a></li><li><a href="/blog/library-react-code-1.html" class="sidebar-link">React 源码解析（一）JSX 转换</a></li><li><a href="/blog/library-react-code-2.html" class="sidebar-link">React 源码解析（二）FiberRoot 构建</a></li><li><a href="/blog/library-react-code-3.html" class="sidebar-link">React 源码解析（三）Fiber 的调度过程</a></li><li><a href="/blog/library-react-code-4.html" class="sidebar-link">React 源码解析（四）深入理解 fiber 更新过程</a></li><li><a href="/blog/library-react-ssr.html" class="sidebar-link">React 服务器端渲染</a></li><li><a href="/blog/library-react-hooks.html" class="sidebar-link">使用 React Hooks 节省 90% 的代码</a></li><li><a href="/blog/library-vue.html" class="sidebar-link">Vue 使用总结</a></li><li><a href="/blog/library-vue-flow.html" class="sidebar-link">图解 Vue 响应式原理</a></li><li><a href="/blog/library-vue-nexttick.html" class="sidebar-link">图解 Vue 异步更新</a></li><li><a href="/blog/library-miniProgram.html" class="sidebar-link">小程序使用总结</a></li><li><a href="/blog/library-redux.html" class="sidebar-link">Redux 使用总结</a></li><li><a href="/blog/library-react-redux-code.html" class="sidebar-link">React Hooks 替代 React-Redux</a></li><li><a href="/blog/library-rxjs.html" class="sidebar-link">RxJS 基础知识总结</a></li><li><a href="/blog/library-koa.html" class="sidebar-link">Koa 源码阅读</a></li><li><a href="/blog/library-koa-diy.html" class="sidebar-link">深入 Koa 原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/css-icon.html" class="sidebar-link">网站图标开发指南</a></li><li><a href="/blog/css.html" class="sidebar-link">CSS 使用总结</a></li><li><a href="/blog/css-modules.html" class="sidebar-link">CSS 模块化</a></li><li><a href="/blog/css-next.html" class="sidebar-link">CSS NEXT 语法</a></li><li><a href="/blog/css-ifc.html" class="sidebar-link">CSS IFC 总结</a></li><li><a href="/blog/css-flex.html" class="sidebar-link">CSS Flex 布局总结</a></li><li><a href="/blog/css-useful.html" class="sidebar-link">CSS 有趣的特性</a></li><li><a href="/blog/css-devicePixelRatio.html" class="sidebar-link">CSS 设备像素比</a></li><li><a href="/blog/css-houdini-star.html" class="sidebar-link">CSS Houdini 画一片星空</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>网络协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/osi-flow.html" class="sidebar-link">一文串联 HTTP、TCP、IP、以太网</a></li><li><a href="/blog/osi-http.html" class="sidebar-link">HTTP 协议总结</a></li><li><a href="/blog/osi-https.html" class="sidebar-link">HTTPS 协议总结</a></li><li><a href="/blog/osi-tcp.html" class="sidebar-link">TCP 协议总结</a></li><li><a href="/blog/osi-web-security.html" class="sidebar-link">一文读懂 Web 安全</a></li><li><a href="/blog/osi-web-login.html" class="active sidebar-link">前端登录，这一篇就够了</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/osi-web-login.html#cookie-session-登录" class="sidebar-link">Cookie + Session 登录</a></li><li class="sidebar-sub-header"><a href="/blog/osi-web-login.html#token-登录" class="sidebar-link">Token 登录</a></li><li class="sidebar-sub-header"><a href="/blog/osi-web-login.html#sso-单点登录" class="sidebar-link">SSO 单点登录</a></li><li class="sidebar-sub-header"><a href="/blog/osi-web-login.html#oauth-第三方登录" class="sidebar-link">OAuth 第三方登录</a></li><li class="sidebar-sub-header"><a href="/blog/osi-web-login.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/blog/osi-hijack.html" class="sidebar-link">流量劫持</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>运维相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/operation-docker-micro-service.html" class="sidebar-link">Docker 部署简单的 Web 服务</a></li><li><a href="/blog/operation-linux.html" class="sidebar-link">Linux 快捷键</a></li><li><a href="/blog/operation-linux-login.html" class="sidebar-link">Linux 免密登录配置</a></li><li><a href="/blog/operation-linux-file.html" class="sidebar-link">Linux 替换文件内容命令</a></li><li><a href="/blog/operation-nginx-match.html" class="sidebar-link">Nginx Location 匹配规则</a></li><li><a href="/blog/operation-nginx-load-balancing.html" class="sidebar-link">Nginx 负载均衡配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JS 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js-prototype.html" class="sidebar-link">快速读懂 JS 原型链</a></li><li><a href="/blog/js-principle.html" class="sidebar-link">JS 编译器，解释引擎</a></li><li><a href="/blog/js-promise.html" class="sidebar-link">JS 理解 Promise</a></li><li><a href="/blog/js-this.html" class="sidebar-link">JS 理解 This</a></li><li><a href="/blog/js-canvas.html" class="sidebar-link">两行代码实现图片碎片化加载</a></li><li><a href="/blog/js-operator-priority.html" class="sidebar-link">JS 运算符优先级</a></li><li><a href="/blog/js-jsBridge.html" class="sidebar-link">JS Bridge 总结</a></li><li><a href="/blog/js-module.html" class="sidebar-link">JS 模块化</a></li><li><a href="/blog/js-inherit.html" class="sidebar-link">JS 实现继承</a></li><li><a href="/blog/js-event.html" class="sidebar-link">JS 事件</a></li><li><a href="/blog/js-form.html" class="sidebar-link">JS 表单基础知识</a></li><li><a href="/blog/js-html5-program.html" class="sidebar-link">JS PostMessage &amp; 拖放 API</a></li><li><a href="/blog/js-recursion.html" class="sidebar-link">JS 函数尾递归优化</a></li><li><a href="/blog/js-object-ergodic.html" class="sidebar-link">JS 对象属性的遍历</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>编程基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/base-function-monad.html" class="sidebar-link">学习函数式编程 Monad</a></li><li><a href="/blog/base-function.html" class="sidebar-link">轻松实战函数式编程</a></li><li><a href="/blog/base-typescript.html" class="sidebar-link">Typescript 使用总结</a></li><li><a href="/blog/base-graphql.html" class="sidebar-link">GraphQL 使用总结</a></li><li><a href="/blog/base-ioc.html" class="sidebar-link">你需要知道的依赖注入</a></li><li><a href="/blog/base-functional.html" class="sidebar-link">函数式编程</a></li><li><a href="/blog/base-webcomponents.html" class="sidebar-link">Web Component 基础</a></li><li><a href="/blog/base-structure.html" class="sidebar-link">数据结构与算法</a></li><li><a href="/blog/base-structure-base-select.html" class="sidebar-link">查找算法</a></li><li><a href="/blog/base-structure-base-sort.html" class="sidebar-link">基本排序算法</a></li><li><a href="/blog/base-structure-high-algorithm.html" class="sidebar-link">高级算法</a></li><li><a href="/blog/base-structure-senior-sort.html" class="sidebar-link">高级排序算法</a></li><li><a href="/blog/base-design-pattern.html" class="sidebar-link">设计模式</a></li><li><a href="/blog/base-computer.html" class="sidebar-link">计算机组成原理</a></li><li><a href="/blog/base-technology.html" class="sidebar-link">专业术语</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>总结思考</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/2020-6.html" class="sidebar-link">我的 2020 总结（上）</a></li><li><a href="/blog/2019-12.html" class="sidebar-link">我的 2019 总结（下）</a></li><li><a href="/blog/2019-6.html" class="sidebar-link">我的 2019 总结（上）</a></li><li><a href="/blog/2018.html" class="sidebar-link">我的 2018 总结</a></li><li><a href="/blog/frontend.html" class="sidebar-link">我的前端知识清单</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其它</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/other-pit.html" class="sidebar-link">记录遇到的坑</a></li><li><a href="/blog/other-tools.html" class="sidebar-link">常用工具整理</a></li><li><a href="/blog/other-vscode.html" class="sidebar-link">VSCode 常用快捷键</a></li><li><a href="/blog/other-npm.html" class="sidebar-link">实用的 npm 包</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="前端登录，这一篇就够了"><a href="#前端登录，这一篇就够了" class="header-anchor">#</a> 前端登录，这一篇就够了</h1> <p>登录是每个网站中都经常用到的一个功能，在页面上我们输入账号密码，敲一下回车键，就登录了，但这背后的登录原理你是否清楚呢？今天我们就来介绍几种常用的登录方式。</p> <ul><li>Cookie + Session 登录</li> <li>Token 登录</li> <li>SSO 单点登录</li> <li>OAuth 第三方登录</li></ul> <h2 id="cookie-session-登录"><a href="#cookie-session-登录" class="header-anchor">#</a> Cookie + Session 登录</h2> <p>HTTP 是一种无状态的协议，客户端每次发送请求时，首先要和服务器端建立一个连接，在请求完成后又会断开这个连接。这种方式可以节省传输时占用的连接资源，但同时也存在一个问题：<em><strong>每次请求都是独立的</strong></em>，服务器端无法判断本次请求和上一次请求是否来自同一个用户，进而也就无法判断用户的登录状态。</p> <p>为了解决 HTTP 无状态的问题，<em>Lou Montulli</em> 在 1994 年的时候，推出了 Cookie。</p> <blockquote><p>Cookie 是服务器端发送给客户端的一段特殊信息，这些信息以文本的方式存放在客户端，客户端每次向服务器端发送请求时都会带上这些特殊信息。</p></blockquote> <p>有了 Cookie 之后，服务器端就能够获取到客户端传递过来的信息了，如果需要对信息进行验证，还需要通过 Session。</p> <blockquote><p>客户端请求服务端，服务端会为这次请求开辟一块内存空间，这个便是 Session 对象。</p></blockquote> <p>有了 Cookie 和 Session 之后，我们就可以进行登录认证了。</p> <h3 id="cookie-session-实现流程"><a href="#cookie-session-实现流程" class="header-anchor">#</a> Cookie + Session  实现流程</h3> <p>Cookie + Session 的登录方式是最经典的一种登录方式，现在仍然有大量的企业在使用。</p> <p>用户首次登录时：</p> <p><img src="https://cdn.yinhengli.com/image-20200702094538842.png" alt=""></p> <ol><li>用户访问 <code>a.com/pageA</code>，并输入密码登录。</li> <li>服务器验证密码无误后，会创建 SessionId，并将它保存起来。</li> <li>服务器端响应这个 HTTP 请求，并通过 Set-Cookie 头信息，将 SessionId 写入 Cookie 中。</li></ol> <blockquote><p>服务器端的 SessionId 可能存放在很多地方，例如：内存、文件、数据库等。</p></blockquote> <p>第一次登录完成之后，后续的访问就可以直接使用 Cookie 进行身份验证了：</p> <p><img src="https://cdn.yinhengli.com/image-20200702094559241.png" alt=""></p> <ol><li>用户访问 <code>a.com/pageB</code> 页面时，会自动带上第一次登录时写入的 Cookie。</li> <li>服务器端比对 Cookie 中的 SessionId 和保存在服务器端的 SessionId 是否一致。</li> <li>如果一致，则身份验证成功。</li></ol> <h3 id="cookie-session-存在的问题"><a href="#cookie-session-存在的问题" class="header-anchor">#</a> Cookie + Session  存在的问题</h3> <p>虽然我们使用 Cookie + Session  的方式完成了登录验证，但仍然存在一些问题：</p> <ul><li>由于服务器端需要对接大量的客户端，也就需要存放大量的 SessionId，这样会导致服务器压力过大。</li> <li>如果服务器端是一个集群，为了同步登录态，需要将 SessionId 同步到每一台机器上，无形中增加了服务器端维护成本。</li> <li>由于 SessionId 存放在 Cookie 中，所以无法避免 CSRF 攻击。</li></ul> <h2 id="token-登录"><a href="#token-登录" class="header-anchor">#</a> Token 登录</h2> <p>为了解决 Session + Cookie 机制暴露出的诸多问题，我们可以使用 Token 的登录方式。</p> <blockquote><p>Token 是服务端生成的一串字符串，以作为客户端请求的一个令牌。当第一次登录后，服务器会生成一个 Token 并返回给客户端，客户端后续访问时，只需带上这个 Token 即可完成身份认证。</p></blockquote> <h3 id="token-机制实现流程"><a href="#token-机制实现流程" class="header-anchor">#</a> Token 机制实现流程</h3> <p>用户首次登录时：</p> <p><img src="https://cdn.yinhengli.com/image-20200702095140936.png" alt=""></p> <ol><li>用户输入账号密码，并点击登录。</li> <li>服务器端验证账号密码无误，创建 Token。</li> <li>服务器端将 Token 返回给客户端，由***客户端自由保存***。</li></ol> <p>后续页面访问时：</p> <p><img src="https://cdn.yinhengli.com/image-20200702095402558.png" alt=""></p> <ol><li>用户访问 <code>a.com/pageB</code> 时，带上第一次登录时获取的 Token。</li> <li>服务器端验证 Token ，有效则身份验证成功。</li></ol> <h3 id="token-机制的特点"><a href="#token-机制的特点" class="header-anchor">#</a> Token 机制的特点</h3> <p>根据上面的案例，我们可以分析出 Token 的优缺点：</p> <ul><li>服务器端不需要存放 Token，所以不会对服务器端造成压力，即使是服务器集群，也不需要增加维护成本。</li> <li>Token 可以存放在前端任何地方，可以不用保存在 Cookie 中，提升了页面的安全性。</li> <li>Token 下发之后，只要在生效时间之内，就一直有效，如果服务器端想收回此 Token 的权限，并不容易。</li></ul> <h3 id="token-的生成方式"><a href="#token-的生成方式" class="header-anchor">#</a> Token 的生成方式</h3> <p>最常见的 Token 生成方式是使用 JWT（Json Web Token），它是一种简洁的，自包含的方法用于通信双方之间以 JSON 对象的形式安全的传递信息。</p> <p>上文中我们说到，使用 Token 后，服务器端并不会存储 Token，那怎么判断客户端发过来的 Token 是合法有效的呢？</p> <p>答案其实就在 Token 字符串中，其实 Token 并不是一串杂乱无章的字符串，而是通过多种算法拼接组合而成的字符串，我们来具体分析一下。</p> <p>JWT 算法主要分为 3 个部分：header（头信息），playload（消息体），signature（签名）。</p> <p>header 部分指定了该 JWT 使用的签名算法:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>header <span class="token operator">=</span> <span class="token string">'{&quot;alg&quot;:&quot;HS256&quot;,&quot;typ&quot;:&quot;JWT&quot;}'</span>   <span class="token comment">// `HS256` 表示使用了 HMAC-SHA256 来生成签名。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>playload 部分表明了 JWT 的意图：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>payload <span class="token operator">=</span> <span class="token string">'{&quot;loggedInAs&quot;:&quot;admin&quot;,&quot;iat&quot;:1422779638}'</span>     <span class="token comment">//iat 表示令牌生成的时间</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>signature 部分为 JWT 的签名，主要为了让 JWT 不能被随意篡改，签名的方法分为两个步骤：</p> <ol><li>输入 <code>base64url</code> 编码的 header 部分、 <code>.</code> 、<code>base64url</code> 编码的 playload 部分，输出 unsignedToken。</li> <li>输入服务器端私钥、unsignedToken，输出 signature 签名。</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> base64Header <span class="token operator">=</span> <span class="token function">encodeBase64</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span>
<span class="token keyword">const</span> base64Payload <span class="token operator">=</span> <span class="token function">encodeBase64</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span>
<span class="token keyword">const</span> unsignedToken <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base64Header<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base64Payload<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">'服务器私钥'</span>

signature <span class="token operator">=</span> <span class="token constant">HMAC</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> unsignedToken<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>最后的 Token 计算如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> base64Header <span class="token operator">=</span> <span class="token function">encodeBase64</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span>
<span class="token keyword">const</span> base64Payload <span class="token operator">=</span> <span class="token function">encodeBase64</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span>
<span class="token keyword">const</span> base64Signature <span class="token operator">=</span> <span class="token function">encodeBase64</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span>

token <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base64Header<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base64Payload<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base64Signature<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>服务器在判断 Token 时：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>base64Header<span class="token punctuation">,</span> base64Payload<span class="token punctuation">,</span> base64Signature<span class="token punctuation">]</span> <span class="token operator">=</span> token<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> signature1 <span class="token operator">=</span> <span class="token function">decodeBase64</span><span class="token punctuation">(</span>base64Signature<span class="token punctuation">)</span>
<span class="token keyword">const</span> unsignedToken <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base64Header<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base64Payload<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">const</span> signature2 <span class="token operator">=</span> <span class="token constant">HMAC</span><span class="token punctuation">(</span><span class="token string">'服务器私钥'</span><span class="token punctuation">,</span> unsignedToken<span class="token punctuation">)</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>signature1 <span class="token operator">===</span> signature2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'签名验证成功，token 没有被篡改'</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> payload <span class="token operator">=</span>  <span class="token function">decodeBase64</span><span class="token punctuation">(</span>base64Payload<span class="token punctuation">)</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> payload<span class="token punctuation">.</span>iat <span class="token operator">&lt;</span> <span class="token string">'token 有效期'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'token 有效'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>有了 Token 之后，登录方式已经变得非常高效，接下来我们介绍另外两种登录方式。</p> <h2 id="sso-单点登录"><a href="#sso-单点登录" class="header-anchor">#</a> SSO 单点登录</h2> <p>单点登录指的是在公司内部搭建一个公共的认证中心，公司下的所有产品的登录都可以在认证中心里完成，一个产品在认证中心登录后，再去访问另一个产品，可以不用再次登录，即可获取登录状态。</p> <h3 id="sso-机制实现流程"><a href="#sso-机制实现流程" class="header-anchor">#</a> SSO 机制实现流程</h3> <p>用户首次访问时，需要在认证中心登录：</p> <p><img src="http://img.mp.itc.cn/upload/20170614/2ada5907404d497bbf782d53eaabe842_th.jpg" alt=""></p> <ol><li>用户访问网站  <code>a.com</code> 下的 pageA 页面。</li> <li>由于没有登录，则会重定向到认证中心，并带上回调地址 <code>www.sso.com?return_uri=a.com/pageA</code>，以便登录后直接进入对应页面。</li> <li>用户在认证中心输入账号密码，提交登录。</li> <li>认证中心验证账号密码有效，然后重定向  <code>a.com?ticket=123</code> 带上授权码 ticket，并将认证中心 <code>sso.com</code> 的登录态写入 Cookie。</li> <li>在 <code>a.com</code> 服务器中，拿着 ticket 向认证中心确认，授权码 ticket 真实有效。</li> <li>验证成功后，服务器将登录信息写入 Cookie（此时客户端有 2 个 Cookie 分别存有 <code>a.com</code> 和 <code>sso.com</code> 的登录态）。</li></ol> <hr> <p>认证中心登录完成之后，继续访问 <code>a.com</code> 下的其他页面：</p> <p><img src="http://img.mp.itc.cn/upload/20170614/3b6461683e044057bfad55ef6dc68a5b_th.jpg" alt=""></p> <p>这个时候，由于 <code>a.com</code> 存在已登录的 Cookie 信息，所以服务器端直接认证成功。</p> <hr> <p>如果认证中心登录完成之后，访问 <code>b.com</code> 下的页面：</p> <p><img src="http://img.mp.itc.cn/upload/20170614/5922c26b4d294103a15ad23a4b90a65d_th.jpg" alt=""></p> <p>这个时候，由于认证中心存在之前登录过的 Cookie，所以也不用再次输入账号密码，直接返回第 4 步，下发 ticket 给 <code>b.com</code> 即可。</p> <h3 id="sso-单点登录退出"><a href="#sso-单点登录退出" class="header-anchor">#</a> SSO 单点登录退出</h3> <p>目前我们已经完成了单点登录，在同一套认证中心的管理下，多个产品可以共享登录态。现在我们需要考虑退出了，即：在一个产品中退出了登录，怎么让其他的产品也都退出登录？</p> <p>原理其实不难，可以回过头来看第 5 步，每一个产品在向认证中心验证 ticket 时，其实可以顺带将自己的退出登录 api 发送到认证中心。</p> <p>当某个产品 <code>c.com</code> 退出登录时：</p> <ol><li>清空 <code>c.com</code> 中的登录态 Cookie。</li> <li>请求认证中心 <code>sso.com</code> 中的退出 api。</li> <li>认证中心遍历下发过 ticket 的所有产品，并调用对应的退出 api，完成退出。</li></ol> <h2 id="oauth-第三方登录"><a href="#oauth-第三方登录" class="header-anchor">#</a> OAuth 第三方登录</h2> <p>在上文中，我们使用单点登录完成了多产品的登录态共享，但都是建立在一套统一的认证中心下，对于一些小型企业，未免太麻烦，有没有一种登录能够做到开箱即用？</p> <p>其实是有的，很多大厂都会提供自己的第三方登录服务，我们一起来分析一下。</p> <p><img src="https://fengkui.net/uploads/article/20180515/5afaf52c64dc9.jpg" alt=""></p> <h3 id="oauth-机制实现流程"><a href="#oauth-机制实现流程" class="header-anchor">#</a> OAuth 机制实现流程</h3> <p>这里以微信开放平台的接入流程为例：</p> <p><img src="https://res.wx.qq.com/op_res/ZLIc-BdWcu_ixroOT0sBEtk0UwpTewqS6ujxbC2QOpbKIVp_DzleM_C9I-9GPDDh" alt=""></p> <ol><li>首先，<code>a.com</code> 的运营者需要在微信开放平台注册账号，并向微信申请使用微信登录功能。</li> <li>申请成功后，得到申请的 appid、appsecret。</li> <li>用户在 <code>a.com</code> 上选择使用微信登录。</li> <li>这时会跳转微信的 OAuth 授权登录，并带上 <code>a.com</code> 的回调地址。</li> <li>用户输入微信账号和密码，登录成功后，需要选择具体的授权范围，如：授权用户的头像、昵称等。</li> <li>授权之后，微信会根据拉起 <code>a.com?code=123</code> ，这时带上了一个临时票据 code。</li> <li>获取 code 之后， <code>a.com</code> 会拿着 code 、appid、appsecret，向微信服务器申请 token，验证成功后，微信会下发一个 token。</li> <li>有了 token 之后， <code>a.com</code> 就可以凭借 token 拿到对应的微信用户头像，用户昵称等信息了。</li> <li><code>a.com</code> 提示用户登录成功，并将登录状态写入 Cooke，以作为后续访问的凭证。</li></ol> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>本文介绍了 4 种常见的登录方式，原理应该大家都清楚了，总结一下这 4 种方案的使用场景：</p> <ul><li>Cookie + Session 历史悠久，适合于简单的后端架构，需开发人员自己处理好安全问题。</li> <li>Token 方案对后端压力小，适合大型分布式的后端架构，但已分发出去的 token ，如果想收回权限，就不是很方便了。</li> <li>SSO 单点登录，适用于中大型企业，想要统一内部所有产品的登录方式。</li> <li>OAuth 第三方登录，简单易用，对用户和开发者都友好，但第三方平台很多，需要选择合适自己的第三方登录平台。</li></ul> <p><img src="https://cdn.yinhengli.com/qianduanrizhi_guanzhu.png" alt=""></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/lmjben/blog/edit/master/docs/blog/osi-web-login.md" target="_blank" rel="noopener noreferrer">本文源码地址</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">7/27/2020, 2:28:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/osi-web-security.html" class="prev">
        一文读懂 Web 安全
      </a></span> <span class="next"><a href="/blog/osi-hijack.html">
        流量劫持
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.d9752643.js" defer></script><script src="/assets/js/2.735dd80d.js" defer></script><script src="/assets/js/97.3e1817d0.js" defer></script><script src="/assets/js/3.782c6b4d.js" defer></script>
  </body>
</html>
