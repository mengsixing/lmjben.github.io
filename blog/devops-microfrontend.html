<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>微前端自检清单 | 前端日志</title>
    <meta name="description" content="欢迎访问公众号：前端日志">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/hero.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.7ffd56ab.css" as="style"><link rel="preload" href="/assets/js/app.ac579d8a.js" as="script"><link rel="preload" href="/assets/js/2.735dd80d.js" as="script"><link rel="preload" href="/assets/js/41.c00eb2d1.js" as="script"><link rel="preload" href="/assets/js/3.782c6b4d.js" as="script"><link rel="prefetch" href="/assets/js/10.505689c0.js"><link rel="prefetch" href="/assets/js/100.1da6e405.js"><link rel="prefetch" href="/assets/js/101.65726592.js"><link rel="prefetch" href="/assets/js/102.b28c9300.js"><link rel="prefetch" href="/assets/js/103.08d7c3bc.js"><link rel="prefetch" href="/assets/js/104.6912b35b.js"><link rel="prefetch" href="/assets/js/105.6278e484.js"><link rel="prefetch" href="/assets/js/106.9feafa36.js"><link rel="prefetch" href="/assets/js/107.0db09c97.js"><link rel="prefetch" href="/assets/js/108.c4be9181.js"><link rel="prefetch" href="/assets/js/109.54e3a384.js"><link rel="prefetch" href="/assets/js/11.c9f038f7.js"><link rel="prefetch" href="/assets/js/110.c7d3f188.js"><link rel="prefetch" href="/assets/js/111.82e55839.js"><link rel="prefetch" href="/assets/js/112.bb60178d.js"><link rel="prefetch" href="/assets/js/113.6a4f6197.js"><link rel="prefetch" href="/assets/js/114.6cf3f5e3.js"><link rel="prefetch" href="/assets/js/115.abe555a1.js"><link rel="prefetch" href="/assets/js/116.a8a49ac2.js"><link rel="prefetch" href="/assets/js/117.932f6653.js"><link rel="prefetch" href="/assets/js/118.8920987d.js"><link rel="prefetch" href="/assets/js/119.aa0f3087.js"><link rel="prefetch" href="/assets/js/12.afb00e2e.js"><link rel="prefetch" href="/assets/js/120.2b15db76.js"><link rel="prefetch" href="/assets/js/121.92b042e6.js"><link rel="prefetch" href="/assets/js/122.09e3705f.js"><link rel="prefetch" href="/assets/js/123.f04c5ddd.js"><link rel="prefetch" href="/assets/js/124.e7272dd2.js"><link rel="prefetch" href="/assets/js/125.df14a0d1.js"><link rel="prefetch" href="/assets/js/126.75661e77.js"><link rel="prefetch" href="/assets/js/13.ddeb351b.js"><link rel="prefetch" href="/assets/js/14.8f7bc2ff.js"><link rel="prefetch" href="/assets/js/15.30f42003.js"><link rel="prefetch" href="/assets/js/16.16d5e1bd.js"><link rel="prefetch" href="/assets/js/17.871b5c91.js"><link rel="prefetch" href="/assets/js/18.6d70e40f.js"><link rel="prefetch" href="/assets/js/19.cf0a9587.js"><link rel="prefetch" href="/assets/js/20.9f5a5b0d.js"><link rel="prefetch" href="/assets/js/21.dda926fc.js"><link rel="prefetch" href="/assets/js/22.32358c93.js"><link rel="prefetch" href="/assets/js/23.d4428673.js"><link rel="prefetch" href="/assets/js/24.b8c79eb7.js"><link rel="prefetch" href="/assets/js/25.144e4145.js"><link rel="prefetch" href="/assets/js/26.ebb5c545.js"><link rel="prefetch" href="/assets/js/27.68caac2d.js"><link rel="prefetch" href="/assets/js/28.5d1c348d.js"><link rel="prefetch" href="/assets/js/29.74cf8d9e.js"><link rel="prefetch" href="/assets/js/30.32be75fa.js"><link rel="prefetch" href="/assets/js/31.13668fc2.js"><link rel="prefetch" href="/assets/js/32.9ac656b6.js"><link rel="prefetch" href="/assets/js/33.f3326b93.js"><link rel="prefetch" href="/assets/js/34.3afa4d41.js"><link rel="prefetch" href="/assets/js/35.1c920298.js"><link rel="prefetch" href="/assets/js/36.1f437103.js"><link rel="prefetch" href="/assets/js/37.63567db4.js"><link rel="prefetch" href="/assets/js/38.4bd41508.js"><link rel="prefetch" href="/assets/js/39.56a3c0cc.js"><link rel="prefetch" href="/assets/js/4.e842843a.js"><link rel="prefetch" href="/assets/js/40.0fff8d1f.js"><link rel="prefetch" href="/assets/js/42.bbc1c6ce.js"><link rel="prefetch" href="/assets/js/43.59dc5312.js"><link rel="prefetch" href="/assets/js/44.4c015b19.js"><link rel="prefetch" href="/assets/js/45.faecb0a3.js"><link rel="prefetch" href="/assets/js/46.5c9ad985.js"><link rel="prefetch" href="/assets/js/47.6c0f9ac8.js"><link rel="prefetch" href="/assets/js/48.7f13e38a.js"><link rel="prefetch" href="/assets/js/49.3b8c26f4.js"><link rel="prefetch" href="/assets/js/5.faf24bb6.js"><link rel="prefetch" href="/assets/js/50.1731aa2b.js"><link rel="prefetch" href="/assets/js/51.4824b328.js"><link rel="prefetch" href="/assets/js/52.2edab9bb.js"><link rel="prefetch" href="/assets/js/53.0fb22bbf.js"><link rel="prefetch" href="/assets/js/54.fa59ed3f.js"><link rel="prefetch" href="/assets/js/55.6b278309.js"><link rel="prefetch" href="/assets/js/56.81473338.js"><link rel="prefetch" href="/assets/js/57.08f7c27e.js"><link rel="prefetch" href="/assets/js/58.329ca3a2.js"><link rel="prefetch" href="/assets/js/59.b0c2344b.js"><link rel="prefetch" href="/assets/js/6.a78c385c.js"><link rel="prefetch" href="/assets/js/60.14f3eaaa.js"><link rel="prefetch" href="/assets/js/61.bd85486c.js"><link rel="prefetch" href="/assets/js/62.af78b786.js"><link rel="prefetch" href="/assets/js/63.c11f7e35.js"><link rel="prefetch" href="/assets/js/64.7d0f4c75.js"><link rel="prefetch" href="/assets/js/65.8e6806c7.js"><link rel="prefetch" href="/assets/js/66.c36a3ef0.js"><link rel="prefetch" href="/assets/js/67.5adbf794.js"><link rel="prefetch" href="/assets/js/68.313a1437.js"><link rel="prefetch" href="/assets/js/69.26e4802c.js"><link rel="prefetch" href="/assets/js/7.428acef7.js"><link rel="prefetch" href="/assets/js/70.96a6c836.js"><link rel="prefetch" href="/assets/js/71.44df8c61.js"><link rel="prefetch" href="/assets/js/72.c9dc5061.js"><link rel="prefetch" href="/assets/js/73.42376ec5.js"><link rel="prefetch" href="/assets/js/74.81663901.js"><link rel="prefetch" href="/assets/js/75.c58eee81.js"><link rel="prefetch" href="/assets/js/76.29ca9983.js"><link rel="prefetch" href="/assets/js/77.b2fd1ba9.js"><link rel="prefetch" href="/assets/js/78.8daade11.js"><link rel="prefetch" href="/assets/js/79.ba66c24e.js"><link rel="prefetch" href="/assets/js/8.62497525.js"><link rel="prefetch" href="/assets/js/80.9ade3321.js"><link rel="prefetch" href="/assets/js/81.ad895689.js"><link rel="prefetch" href="/assets/js/82.67f3c093.js"><link rel="prefetch" href="/assets/js/83.f2e73506.js"><link rel="prefetch" href="/assets/js/84.9fb12101.js"><link rel="prefetch" href="/assets/js/85.6574cbd8.js"><link rel="prefetch" href="/assets/js/86.c75846d3.js"><link rel="prefetch" href="/assets/js/87.c7ea04f1.js"><link rel="prefetch" href="/assets/js/88.699a63e6.js"><link rel="prefetch" href="/assets/js/89.66c6ad53.js"><link rel="prefetch" href="/assets/js/9.f32f43c5.js"><link rel="prefetch" href="/assets/js/90.075a8ba4.js"><link rel="prefetch" href="/assets/js/91.4aaf47ff.js"><link rel="prefetch" href="/assets/js/92.95d16bcc.js"><link rel="prefetch" href="/assets/js/93.0452315b.js"><link rel="prefetch" href="/assets/js/94.60cec456.js"><link rel="prefetch" href="/assets/js/95.fc9f7057.js"><link rel="prefetch" href="/assets/js/96.b840c29b.js"><link rel="prefetch" href="/assets/js/97.5423f7eb.js"><link rel="prefetch" href="/assets/js/98.7328981d.js"><link rel="prefetch" href="/assets/js/99.36edc613.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7ffd56ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  原创
</a></div><div class="nav-item"><a href="/translate/" class="nav-link">
  翻译
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  阅读
</a></div> <a href="https://github.com/lmjben/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  原创
</a></div><div class="nav-item"><a href="/translate/" class="nav-link">
  翻译
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  阅读
</a></div> <a href="https://github.com/lmjben/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>DevOps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/devops-microfrontend.html" class="active sidebar-link">微前端自检清单</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/devops-microfrontend.html#需求分析" class="sidebar-link">需求分析</a></li><li class="sidebar-sub-header"><a href="/blog/devops-microfrontend.html#技术方案调研" class="sidebar-link">技术方案调研</a></li><li class="sidebar-sub-header"><a href="/blog/devops-microfrontend.html#拆分方案调研" class="sidebar-link">拆分方案调研</a></li><li class="sidebar-sub-header"><a href="/blog/devops-microfrontend.html#部署流程检查" class="sidebar-link">部署流程检查</a></li><li class="sidebar-sub-header"><a href="/blog/devops-microfrontend.html#思考与总结" class="sidebar-link">思考与总结</a></li></ul></li><li><a href="/blog/devops-kubernetes.html" class="sidebar-link">Kubernetes 使用总结</a></li><li><a href="/blog/devops-docker.html" class="sidebar-link">Docker 使用总结</a></li><li><a href="/blog/devops-git.html" class="sidebar-link">Git 常用使用方式</a></li><li><a href="/blog/devops-dependencies.html" class="sidebar-link">Package.json 依赖管理</a></li><li><a href="/blog/devops-image.html" class="sidebar-link">合理选择图片格式</a></li><li><a href="/blog/devops-performance.html" class="sidebar-link">前端性能优化</a></li><li><a href="/blog/devops-commitlint.html" class="sidebar-link">Commitlint 使用总结</a></li><li><a href="/blog/devops-cli-diy.html" class="sidebar-link">实现一个自己的 CLI</a></li><li><a href="/blog/devops-test.html" class="sidebar-link">前端测试</a></li><li><a href="/blog/devops-webpack-entry.html" class="sidebar-link">Webpack 系列（三）整体流程分析</a></li><li><a href="/blog/devops-webpack-flow.html" class="sidebar-link">Webpack 系列（二）手写模块打包代码</a></li><li><a href="/blog/devops-webpack.html" class="sidebar-link">Webpack 系列（一）使用总结</a></li><li><a href="/blog/devops-cdfang-spider.html" class="sidebar-link">实战：手搭一个 React，Typescript，Koa，GraphQL 环境</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/library-node.html" class="sidebar-link">Node.js 使用总结</a></li><li><a href="/blog/library-react.html" class="sidebar-link">React 使用总结</a></li><li><a href="/blog/libary-react-core.html" class="sidebar-link">React 核心知识</a></li><li><a href="/blog/library-react-code-1.html" class="sidebar-link">React 源码解析（一）JSX 转换</a></li><li><a href="/blog/library-react-code-2.html" class="sidebar-link">React 源码解析（二）FiberRoot 构建</a></li><li><a href="/blog/library-react-code-3.html" class="sidebar-link">React 源码解析（三）Fiber 的调度过程</a></li><li><a href="/blog/library-react-code-4.html" class="sidebar-link">React 源码解析（四）深入理解 fiber 更新过程</a></li><li><a href="/blog/library-react-ssr.html" class="sidebar-link">React 服务器端渲染</a></li><li><a href="/blog/library-react-hooks.html" class="sidebar-link">使用 React Hooks 节省 90% 的代码</a></li><li><a href="/blog/library-vue.html" class="sidebar-link">Vue 使用总结</a></li><li><a href="/blog/library-vue-flow.html" class="sidebar-link">图解 Vue 响应式原理</a></li><li><a href="/blog/library-vue-nexttick.html" class="sidebar-link">图解 Vue 异步更新</a></li><li><a href="/blog/library-miniProgram.html" class="sidebar-link">小程序使用总结</a></li><li><a href="/blog/library-redux.html" class="sidebar-link">Redux 使用总结</a></li><li><a href="/blog/library-react-redux-code.html" class="sidebar-link">React Hooks 替代 React-Redux</a></li><li><a href="/blog/library-rxjs.html" class="sidebar-link">RxJS 基础知识总结</a></li><li><a href="/blog/library-koa.html" class="sidebar-link">Koa 源码阅读</a></li><li><a href="/blog/library-koa-diy.html" class="sidebar-link">深入 Koa 原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/css.html" class="sidebar-link">CSS 使用总结</a></li><li><a href="/blog/css-modules.html" class="sidebar-link">CSS 模块化</a></li><li><a href="/blog/css-next.html" class="sidebar-link">CSS NEXT 语法</a></li><li><a href="/blog/css-ifc.html" class="sidebar-link">CSS IFC 总结</a></li><li><a href="/blog/css-flex.html" class="sidebar-link">CSS Flex 布局总结</a></li><li><a href="/blog/css-useful.html" class="sidebar-link">CSS 有趣的特性</a></li><li><a href="/blog/css-devicePixelRatio.html" class="sidebar-link">CSS 设备像素比</a></li><li><a href="/blog/css-houdini-star.html" class="sidebar-link">CSS Houdini 画一片星空</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>网络协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/osi-http.html" class="sidebar-link">HTTP 协议总结</a></li><li><a href="/blog/osi-https.html" class="sidebar-link">HTTPS 协议总结</a></li><li><a href="/blog/osi-tcp.html" class="sidebar-link">TCP 协议总结</a></li><li><a href="/blog/osi-web-security.html" class="sidebar-link">一文读懂 Web 安全</a></li><li><a href="/blog/osi-web-login.html" class="sidebar-link">前端登录，这一篇就够了</a></li><li><a href="/blog/osi-hijack.html" class="sidebar-link">流量劫持</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>运维相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/operation-docker-micro-service.html" class="sidebar-link">Docker 部署简单的 Web 服务</a></li><li><a href="/blog/operation-linux.html" class="sidebar-link">Linux 快捷键</a></li><li><a href="/blog/operation-linux-login.html" class="sidebar-link">Linux 免密登录配置</a></li><li><a href="/blog/operation-linux-file.html" class="sidebar-link">Linux 替换文件内容命令</a></li><li><a href="/blog/operation-nginx-match.html" class="sidebar-link">Nginx Location 匹配规则</a></li><li><a href="/blog/operation-nginx-load-balancing.html" class="sidebar-link">Nginx 负载均衡配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JS 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js-prototype.html" class="sidebar-link">快速读懂 JS 原型链</a></li><li><a href="/blog/js-principle.html" class="sidebar-link">JS 编译器，解释引擎</a></li><li><a href="/blog/js-promise.html" class="sidebar-link">JS 理解 Promise</a></li><li><a href="/blog/js-this.html" class="sidebar-link">JS 理解 This</a></li><li><a href="/blog/js-canvas.html" class="sidebar-link">两行代码实现图片碎片化加载</a></li><li><a href="/blog/js-operator-priority.html" class="sidebar-link">JS 运算符优先级</a></li><li><a href="/blog/js-jsBridge.html" class="sidebar-link">JS Bridge 总结</a></li><li><a href="/blog/js-module.html" class="sidebar-link">JS 模块化</a></li><li><a href="/blog/js-inherit.html" class="sidebar-link">JS 实现继承</a></li><li><a href="/blog/js-event.html" class="sidebar-link">JS 事件</a></li><li><a href="/blog/js-form.html" class="sidebar-link">JS 表单基础知识</a></li><li><a href="/blog/js-html5-program.html" class="sidebar-link">JS PostMessage &amp; 拖放 API</a></li><li><a href="/blog/js-recursion.html" class="sidebar-link">JS 函数尾递归优化</a></li><li><a href="/blog/js-object-ergodic.html" class="sidebar-link">JS 对象属性的遍历</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>编程基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/base-typescript.html" class="sidebar-link">Typescript 使用总结</a></li><li><a href="/blog/base-graphql.html" class="sidebar-link">GraphQL 使用总结</a></li><li><a href="/blog/base-ioc.html" class="sidebar-link">你需要知道的依赖注入</a></li><li><a href="/blog/base-functional.html" class="sidebar-link">函数式编程</a></li><li><a href="/blog/base-webcomponents.html" class="sidebar-link">Web Component 基础</a></li><li><a href="/blog/base-structure.html" class="sidebar-link">数据结构与算法</a></li><li><a href="/blog/base-structure-base-select.html" class="sidebar-link">查找算法</a></li><li><a href="/blog/base-structure-base-sort.html" class="sidebar-link">基本排序算法</a></li><li><a href="/blog/base-structure-high-algorithm.html" class="sidebar-link">高级算法</a></li><li><a href="/blog/base-structure-senior-sort.html" class="sidebar-link">高级排序算法</a></li><li><a href="/blog/base-design-pattern.html" class="sidebar-link">设计模式</a></li><li><a href="/blog/base-computer.html" class="sidebar-link">计算机组成原理</a></li><li><a href="/blog/base-technology.html" class="sidebar-link">专业术语</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>总结思考</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/2020-6.html" class="sidebar-link">我的 2020 总结（上）</a></li><li><a href="/blog/2019-12.html" class="sidebar-link">我的 2019 总结（下）</a></li><li><a href="/blog/2019-6.html" class="sidebar-link">我的 2019 总结（上）</a></li><li><a href="/blog/2018.html" class="sidebar-link">我的 2018 总结</a></li><li><a href="/blog/frontend.html" class="sidebar-link">我的前端知识清单</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其它</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/other-pit.html" class="sidebar-link">记录遇到的坑</a></li><li><a href="/blog/other-tools.html" class="sidebar-link">常用工具整理</a></li><li><a href="/blog/other-vscode.html" class="sidebar-link">VSCode 常用快捷键</a></li><li><a href="/blog/other-npm.html" class="sidebar-link">实用的 npm 包</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="微前端自检清单"><a href="#微前端自检清单" class="header-anchor">#</a> 微前端自检清单</h1> <p>最近在做公司微前端，整理了一份微前端搭建清单，如果你正在考虑是否要做微前端，不妨做个参考。</p> <ul><li>需求分析</li> <li>技术方案分析</li> <li>拆分方案分析</li> <li>部署流程分析</li></ul> <h2 id="需求分析"><a href="#需求分析" class="header-anchor">#</a> 需求分析</h2> <p>第一步，我们需要进行需求分析，以便真正清楚我们需要解决的问题是什么。</p> <p>例如：</p> <ul><li>产品要新增一个业务模块</li> <li>产品要修改项目样式</li> <li>产品反馈项目启动太慢了</li> <li>产品反馈页面跳转刷新很不友好</li></ul> <p>前两个需求是典型的业务需求，它的核心在于解决公司的业务问题，对于这一类需求，通常技术难度都不大，开发者只需要按照原型图，编写出对应的页面就可以了。</p> <p>后两个需求是典型的技术需求，它的核心在于解决技术问题。通常来说，技术需求和用户体验有关，但不会影响项目功能，所以一般产品很少会提技术需求，都是由开发同学主导。</p> <p>目前很多公司都不太重视技术需求，主要是因为和公司业务无关，不能带来真实可见的收益。其实不然，一些技术需求往往能产生巨大的成本收益，所以我们在做技术需求时，<strong>首先需要得到公司的支持</strong>。</p> <h3 id="为什么选择微前端"><a href="#为什么选择微前端" class="header-anchor">#</a> 为什么选择微前端</h3> <p>解决一个技术需求，有很多种方法，为什么选微前端？</p> <p>我们看过微前端的发展史就会明白，它并不是凭空出现的，而是项目在不断发展过程中形成的，解决项目臃肿的技术方案。</p> <p>一个项目在刚成立时，体量很小，但随着项目不断做大，可能会出现以下问题：</p> <ul><li>工程膨胀</li> <li>分支混乱</li> <li>代码冲突</li> <li>打包麻烦</li> <li>维护困难</li></ul> <p>对于这些问题，很难找到一个完美的解决方案，于是就诞生了微前端。</p> <p>有了微前端之后，我们能将一个大项目拆分成多个小项目，这样一来，每一个小项目就非常好优化了。在优化了所有的小项目后，我们再将这些小项目组合起来，就能形成一个完美的大项目了。</p> <p><img src="https://cdn.yinhengli.com/weiqianduan_demo.png" alt=""></p> <p>在实际项目中，如果遇到以下问题，可以考虑使用微前端：</p> <ul><li><p>项目太大，成为了典型的巨石应用，打包很慢。</p></li> <li><p>项目开发者太多，多个同学开发同一套代码，经常出现代码冲突、或修改公共组件引发的 Bug。</p></li> <li><p>项目太老，存在遗留模块，为了兼容它，限制了整个项目的发展。</p></li> <li><p>项目技术栈不统一，使用了多种不同框架，每一种框架又有多个版本共存的情况。</p></li> <li><p>项目由多个团队协同开发，一个功能需要等其他团队开发好之后，才能接着开发。</p></li> <li><p>项目每次发布都是全量发布，即使是上线一个小模块，也可能导致整个项目挂掉。</p></li> <li><p>项目由多个系统组成，完成一个功能需要不断地跳转多个系统页。</p></li> <li><p>项目开发人员流动大，存在一些祖传代码难以维护，一般人都不好改。</p></li> <li><p>项目需要一些试验田方案，即需要在某些模块做一些新技术尝试、框架升级等。</p></li> <li><p>...</p></li></ul> <p>除此之外，还有很多实际情况没有列举完毕，不过没关系，只要我们明白了微前端的特点，就能判断任何情况。</p> <h3 id="微前端特点"><a href="#微前端特点" class="header-anchor">#</a> 微前端特点</h3> <p>微前端的核心是解决巨石应用，它都有这些特点：</p> <ul><li><p>简单、松耦合的代码库</p> <ul><li>微前端架构倾向于编写和维护更小、更简单、更容易开发的项目。</li> <li>技术栈无关，各项目可以使用不同的技术栈。</li></ul></li> <li><p>增量升级</p> <ul><li>支持渐进式重构，先让新旧代码和谐共存，再逐步转化旧代码，直到整个重构完成。</li></ul></li> <li><p>独立部署</p> <ul><li>每一个子应用都具备独立开发，持续部署，独立运行的能力。</li></ul></li> <li><p>团队自治</p> <ul><li>各子项目之间不存在依赖关系，保持隔离。</li> <li>单一职责，每个子项目只做和自己相关的业务工作。</li></ul></li></ul> <blockquote><p>除此之外，微前端提供了一套新的生态系统。它通过拆分小项目，产生了大量的微应用。试想一下，如果大家都将微应用上传到云，那么就会构建一个非常强大的微应用云生态。我们在以后做需求时，也许就是选择各种适合的微应用，然后拼接起来，就完事了。</p> <p>对此保持期待。</p></blockquote> <h3 id="微前端的缺点"><a href="#微前端的缺点" class="header-anchor">#</a> 微前端的缺点</h3> <p>当然，微前端也不是万能的，它也存在以下问题：</p> <ul><li>拆分的粒度越小，便意味着架构变得复杂、维护成本变高。</li> <li>技术栈一旦多样化，便意味着技术栈混乱。</li> <li>管理版本复杂、依赖复杂。</li> <li>开发体验不太友好，开发时可能需要同时启动多个项目。</li></ul> <p>这些问题大多是因为项目拆分成多个项目之后，引发的沟通协作问题。</p> <h2 id="技术方案调研"><a href="#技术方案调研" class="header-anchor">#</a> 技术方案调研</h2> <p>第二步，我们需要确定具体的微前端实现方式。</p> <p>实现微前端有很多种方式：</p> <ul><li>路由分发式
<ul><li>通过 http 服务器的反向代理功能，来将请求路由到对应的应用上。</li> <li>这种方式只是在路由层面看起来是一个项目，但实际上只是通过 a 标签连接了多个项目。</li></ul></li> <li>前端容器化
<ul><li>使用 iframe 作为容器。</li> <li>seo 不友好。</li> <li>需要考虑同源策略 cookie 管理。</li> <li>需要自建一套应用管理、应用通信机制。</li> <li>弹窗不友好。</li> <li>浏览器后退按钮不友好。</li></ul></li> <li>前端微服务化
<ul><li>在不同的框架之上设计通讯、加载机制，以在一个页面内加载对应的应用。</li> <li>常用的框架：qiankun，single-spa 都是这样做的。</li> <li>最常用的方案，适合于快速上手。</li></ul></li> <li>微件化
<ul><li>打包出可以直接嵌入在页面上运行的代码，可能是一段 js，使用时直接引入即可。</li> <li>需要实现一套微件管理机制，成本太高。</li></ul></li> <li>微应用化
<ul><li>通过软件工程的方式，在部署构建环境中通过 webpack 打包，组合多个独立应用成一个单体应用。</li> <li>需要将多个项目打包成一个，所以技术栈需要保持统一。</li></ul></li> <li>应用组件化
<ul><li>将子项目都打包成 webComponent，在主项目中组合。</li> <li>需要考虑 webComponent 兼容性。</li></ul></li></ul> <p>下图是各种方案的优缺点：</p> <p><img src="https://cdn.yinhengli.com/image-20200716174954391.png" alt=""></p> <p>这么多方案，各有利弊，我们应该如何选择呢？</p> <ul><li><p>如果只是想简单快速的做分离，不考虑 seo，可以用 iframe。</p></li> <li><p>如果想做分离的同时，保持良好的单页体验，可以考虑 single-spa、qiankun 框架。</p></li> <li><p>如果公司有很强的技术能力，再考虑自研或其他方案。</p></li></ul> <p>有了技术方案之后，微前端这条路就可以走通了，除此之外，还需考虑过渡方案。</p> <h3 id="过渡方案"><a href="#过渡方案" class="header-anchor">#</a> 过渡方案</h3> <p>过渡方案指的是如何让微前端平滑上线。试想一下，如果在微前端改造时，项目来了新需求，这时应该怎么办？</p> <p>对于这个问题，建议在做微前端改造时，最好快速上线：</p> <ol><li>首先将整个原项目当成一个大的子项目，进行微前端改造。</li> <li>主项目快速搭建好路由、子应用管理，然后立即上线。
<ol><li>路由管理在处理子项目时，如果是原页面，先通过 a 标签跳转，如果是新页面，则使用前端 router 控制跳转。</li> <li>后续逐渐拆分子项目，如果有新的子项目拆分完毕，只需要将 a 标签跳转改为前端 router 控制即可。</li></ol></li> <li>做完前两步之后，我们的架构就已经变成了微前端架构。</li></ol> <h2 id="拆分方案调研"><a href="#拆分方案调研" class="header-anchor">#</a> 拆分方案调研</h2> <p>第三步，我们需要想想，我们要怎么拆分我们的项目呢？</p> <p>常见的拆分方案如下：</p> <ul><li>按照业务拆分
<ul><li>如：一个电商后台，包括商品管理、商家管理、物流管理等。</li> <li>独立出每个业务项目，可以让整个项目结构清晰。</li></ul></li> <li>按照权限拆分
<ul><li>如：一个运营后台，管理员和普通运营看到的页面是不一样的。</li> <li>独立出不同的权限项目，可以突出每个项目的使用范围。</li></ul></li> <li>按照变更的频率拆分
<ul><li>如：一个项目中，包含很少改动的祖传项目和经常改动的业务项目。</li> <li>独立出变更频繁的项目，可以避免频繁更新可能导致整体项目挂掉的风险。</li> <li>独立出很少改动的项目，可以让我们在核心业务上大展拳脚。</li></ul></li> <li>按照组织结构拆分
<ul><li>如：一个功能复杂的项目后台，由多个团队共同开发而成。</li> <li>独立出不同团队的项目，可以避免开发冲突，部署冲突等问题。</li></ul></li> <li>跟随后端微服务拆分
<ul><li>如：后端已经做了不同模块的微服务划分，前端可以直接按照后端来就行了。</li> <li>这种方式有利于前后端保持统一。</li></ul></li></ul> <p>到了这里，我们已经完成了微前端的拆分，但并不是拆完了就结束了，我们还考虑一些拆分后的问题。</p> <p>例如：</p> <ul><li>主项目和子项目的样式是否需要复用？</li> <li>项目权限，是分开还是在统一管理？</li> <li>应用之间如何进行通信？</li></ul> <p>这些问题往往和业务相关，我们在改造时自行判断即可。</p> <h2 id="部署流程检查"><a href="#部署流程检查" class="header-anchor">#</a> 部署流程检查</h2> <p>最后一步，我们需要考虑部署流程。</p> <p>当微前端开发完成之后，我们的项目由 1 个变成了 1 + n(子项目) 个，部署方式势必会发生变化。</p> <p>传统的部署方式如下：</p> <p><img src="https://cdn.yinhengli.com/image-20200718113048802.png" alt=""></p> <p>微前端项目部署方式如下：</p> <p><img src="https://cdn.yinhengli.com/image-20200715172059236.png" alt=""></p> <p>可以看到，项目最终的结构已经完全不同了，开发，测试，部署的流程也都需要进行变化。</p> <ul><li>开发环境的部署</li> <li>测试环境的部署</li> <li>线上环境的部署</li></ul> <h3 id="开发环境的部署"><a href="#开发环境的部署" class="header-anchor">#</a> 开发环境的部署</h3> <p>开发环境其实不需要部署，通常是前端启动一个 localhost 页面，去调后端的接口进行开发。</p> <p>需要注意的是：</p> <ul><li>子项目需支持独立启动，而不是在开发时启动所有项目，只需启动与业务相关的子项目即可。</li> <li>子项目需支持独立部署，开发完成之后，只需要部署与业务相关的子项目即可。</li></ul> <h3 id="测试环境的部署"><a href="#测试环境的部署" class="header-anchor">#</a> 测试环境的部署</h3> <p>测试环境部署变化挺大的，而且涉及到了跨部门沟通，所以应该谨慎对待。</p> <p>以前测试部署流程是：前端只需要提供一个打包文件，测试将文件解压后，放入指定的静态资源目录即可。</p> <p>微前端之后的部署流程：前端需要提供主项目和相关子项目的打包文件，测试需要分别发布多个项目，才能进行测试。</p> <p>这样改动之后，测试的工作量变大了，对于手动部署的测试来说，确实有很大的影响。为了减少测试的工作量，我们可以协助测试来搭建一套自动化部署工具。</p> <p>很多大厂都有自己内部的云服务平台，就像阿里云的 k8s 控制台一样，测试可以在控制台上选择需要部署的前端、后端的分支，然后点击一键部署，就搞定了。</p> <h3 id="上线环境部署"><a href="#上线环境部署" class="header-anchor">#</a> 上线环境部署</h3> <p>对于线上环境来说，运行的是 1 个主项目和 n 个子项目，每个项目都是独立部署且相互独立的，非常适合容器化部署，即：每一个项目都被部署到一个 docker 中，彼此通过主项目进行关联。</p> <p>如图，所有的子项目都交由主项目管理。</p> <p><img src="https://cdn.yinhengli.com/image-20200718110609087.png" alt=""></p> <p>如果公司内部做了持续部署，部署就会更加简单。</p> <p><img src="https://cdn.yinhengli.com/image-20200715175358240.png" alt=""></p> <h2 id="思考与总结"><a href="#思考与总结" class="header-anchor">#</a> 思考与总结</h2> <p>本文从需求分析开始，一步一步理清了微前端需要注意的各种问题，以及一些解决方案，希望能对微前端感兴趣的你有所收获。</p> <p>其实，微前端没有想象中的那么难，如果是用 qiankun、single-spa 等现成框架，学习成本都非常低，关键是要真正动手去做，只要开了头，后面的问题也就不是什么问题了。</p> <p>最后，如果你对此有任何想法，欢迎留言评论！</p> <p><img src="https://cdn.yinhengli.com/qianduanrizhi_guanzhu.png" alt=""></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/lmjben/blog/edit/master/docs/blog/devops-microfrontend.md" target="_blank" rel="noopener noreferrer">本文源码地址</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">7/18/2020, 4:26:40 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/devops-kubernetes.html">
        Kubernetes 使用总结
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.ac579d8a.js" defer></script><script src="/assets/js/2.735dd80d.js" defer></script><script src="/assets/js/41.c00eb2d1.js" defer></script><script src="/assets/js/3.782c6b4d.js" defer></script>
  </body>
</html>
